"use strict";(self.webpackChunk_amphi_pipeline_components_manager=self.webpackChunk_amphi_pipeline_components_manager||[]).push([[298],{298:(e,t,a)=>{a.r(t),a.d(t,{ComponentManager:()=>Q,PipelineComponent:()=>J,default:()=>Y,generateUIFormComponent:()=>q,onChange:()=>T,renderComponentUI:()=>G,renderHandle:()=>K,setDefaultConfig:()=>R});var n=a(262),l=a(98),s=a(345),i=a.n(s),o=a(228),r=a(707),c=a(700),d=a(256);const m="amphi-browseFileDialog-open";class p extends c.BreadCrumbs{constructor(e){super(e),this.model=e.model,this.rootPath=e.rootPath}onUpdateRequest(e){super.onUpdateRequest(e);const t=this.model.manager.services.contents.localPath(this.model.path);t&&this.rootPath&&0===t.indexOf(this.rootPath)&&document.querySelectorAll(".amphi-browseFileDialog .jp-BreadCrumbs > span[title]").forEach((e=>{var t;0===e.title.indexOf(null!==(t=this.rootPath)&&void 0!==t?t:"")?e.className=e.className.replace("amphi-BreadCrumbs-disabled","").trim():-1===e.className.indexOf("amphi-BreadCrumbs-disabled")&&(e.className+=" amphi-BreadCrumbs-disabled")}))}}class h extends d.Widget{constructor(e){super(e),this.model=new c.FilterFileBrowserModel({manager:e.manager,filter:e.filter});const t=this.layout=new d.PanelLayout;this.directoryListing=new c.DirListing({model:this.model}),this.acceptFileOnDblClick=e.acceptFileOnDblClick,this.multiselect=e.multiselect,this.includeDir=e.includeDir,this.dirListingHandleEvent=this.directoryListing.handleEvent,this.directoryListing.handleEvent=e=>{this.handleEvent(e)},this.breadCrumbs=new p({model:this.model,rootPath:e.rootPath}),t.addWidget(this.breadCrumbs),t.addWidget(this.directoryListing)}static async init(e){const t=new h(e);return e.startPath?e.rootPath&&0!==e.startPath.indexOf(e.rootPath)||await t.model.cd(e.startPath):e.rootPath&&await t.model.cd(e.rootPath),t}getValue(){const e=[];for(const t of this.directoryListing.selectedItems())(this.includeDir||"directory"!==t.type)&&e.push(t);return e}handleEvent(e){let t=!1;switch((e instanceof MouseEvent||e instanceof KeyboardEvent)&&(t=e.shiftKey||e.metaKey),e.type){case"keydown":case"keyup":case"mousedown":case"mouseup":case"click":!this.multiselect&&t||this.dirListingHandleEvent.call(this.directoryListing,e);break;case"dblclick":{const t=this.directoryListing.modelForClick(e);if("directory"===(null==t?void 0:t.type))this.dirListingHandleEvent.call(this.directoryListing,e);else if(e.preventDefault(),e.stopPropagation(),this.acceptFileOnDblClick){const e=document.querySelector(`.${m} .jp-mod-accept`);e&&e.click()}break}default:this.dirListingHandleEvent.call(this.directoryListing,e)}}}var u=a(153);new u.LabIcon({name:"amphi:trash-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><g fill="currentColor"><path d="M6.25 6a.75.75 0 01.75.75v5.5a.75.75 0 01-1.5 0v-5.5A.75.75 0 016.25 6zM10.5 6.75a.75.75 0 00-1.5 0v5.5a.75.75 0 001.5 0v-5.5z"/><path fill-rule="evenodd" d="M4 3v-.75A2.25 2.25 0 016.25 0h3.5A2.25 2.25 0 0112 2.25V3h2.25a.75.75 0 010 1.5H14v9.25A2.25 2.25 0 0111.75 16h-7.5A2.25 2.25 0 012 13.75V4.5h-.25a.75.75 0 010-1.5H4zm1.5-.75a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75V3h-5v-.75zm-2 2.25v9.25c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75V4.5h-9z" clip-rule="evenodd"/></g></svg>'});const g=new u.LabIcon({name:"amphi:cog-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"/></svg>'}),v=new u.LabIcon({name:"amphi:settings-icon",svgstr:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   width="16"\n   height="16"\n   fill="none"\n   viewBox="0 0 16 16"\n   version="1.1"\n   id="svg2"\n   sodipodi:docname="settings-16.svg"\n   inkscape:version="1.3 (0e150ed, 2023-07-21)"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg">\n  <defs\n     id="defs2" />\n  <sodipodi:namedview\n     id="namedview2"\n     pagecolor="#505050"\n     bordercolor="#eeeeee"\n     borderopacity="1"\n     inkscape:showpageshadow="0"\n     inkscape:pageopacity="0"\n     inkscape:pagecheckerboard="0"\n     inkscape:deskcolor="#505050"\n     inkscape:zoom="34.875"\n     inkscape:cx="8"\n     inkscape:cy="7.9856631"\n     inkscape:window-width="1392"\n     inkscape:window-height="922"\n     inkscape:window-x="0"\n     inkscape:window-y="75"\n     inkscape:window-maximized="0"\n     inkscape:current-layer="svg2" />\n  <g\n     fill="currentColor"\n     fill-rule="evenodd"\n     clip-rule="evenodd"\n     id="g2">\n    <path\n       d="M8 5a3 3 0 100 6 3 3 0 000-6zM6.5 8a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"\n       id="path1" />\n    <path\n       d="M7.5 0a1.75 1.75 0 00-1.75 1.75v.15c-.16.06-.318.125-.472.196l-.106-.106a1.75 1.75 0 00-2.475 0l-.707.707a1.75 1.75 0 000 2.475l.106.106a6.46 6.46 0 00-.196.472h-.15A1.75 1.75 0 000 7.5v1c0 .966.784 1.75 1.75 1.75h.15c.06.16.125.318.196.472l-.106.107a1.75 1.75 0 000 2.474l.707.708a1.75 1.75 0 002.475 0l.106-.107c.154.071.312.137.472.196v.15c0 .966.784 1.75 1.75 1.75h1a1.75 1.75 0 001.75-1.75v-.15c.16-.06.318-.125.472-.196l.106.107a1.75 1.75 0 002.475 0l.707-.707a1.75 1.75 0 000-2.475l-.106-.107c.071-.154.137-.311.196-.472h.15A1.75 1.75 0 0016 8.5v-1a1.75 1.75 0 00-1.75-1.75h-.15a6.455 6.455 0 00-.196-.472l.106-.106a1.75 1.75 0 000-2.475l-.707-.707a1.75 1.75 0 00-2.475 0l-.106.106a6.46 6.46 0 00-.472-.196v-.15A1.75 1.75 0 008.5 0h-1zm-.25 1.75a.25.25 0 01.25-.25h1a.25.25 0 01.25.25v.698c0 .339.227.636.555.724.42.113.817.28 1.186.492a.75.75 0 00.905-.12l.493-.494a.25.25 0 01.354 0l.707.708a.25.25 0 010 .353l-.494.494a.75.75 0 00-.12.904c.213.369.38.767.492 1.186a.75.75 0 00.724.555h.698a.25.25 0 01.25.25v1a.25.25 0 01-.25.25h-.698a.75.75 0 00-.724.555c-.113.42-.28.817-.492 1.186a.75.75 0 00.12.905l.494.493a.25.25 0 010 .354l-.707.707a.25.25 0 01-.354 0l-.494-.494a.75.75 0 00-.904-.12 4.966 4.966 0 01-1.186.492.75.75 0 00-.555.724v.698a.25.25 0 01-.25.25h-1a.25.25 0 01-.25-.25v-.698a.75.75 0 00-.555-.724 4.966 4.966 0 01-1.186-.491.75.75 0 00-.904.12l-.494.493a.25.25 0 01-.354 0l-.707-.707a.25.25 0 010-.354l.494-.493a.75.75 0 00.12-.905 4.966 4.966 0 01-.492-1.186.75.75 0 00-.724-.555H1.75a.25.25 0 01-.25-.25v-1a.25.25 0 01.25-.25h.698a.75.75 0 00.724-.555c.113-.42.28-.817.491-1.186a.75.75 0 00-.12-.904L3.05 4.11a.25.25 0 010-.353l.707-.708a.25.25 0 01.354 0l.493.494c.24.24.611.289.905.12a4.965 4.965 0 011.186-.492.75.75 0 00.555-.724V1.75z"\n       id="path2" />\n  </g>\n</svg>\n'}),f=new u.LabIcon({name:"amphi:search-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M7.25 2a5.25 5.25 0 103.144 9.455l2.326 2.325a.75.75 0 101.06-1.06l-2.325-2.326A5.25 5.25 0 007.25 2zM3.5 7.25a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0z" clip-rule="evenodd"/></svg>'}),w=new u.LabIcon({name:"amphi:minus-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M3.5 7.75A.75.75 0 014.25 7h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75z" clip-rule="evenodd"/></svg>'}),x=new u.LabIcon({name:"amphi:plus-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M9 3.5a.75.75 0 00-1.5 0V7H4a.75.75 0 000 1.5h3.5V12A.75.75 0 009 12V8.5h3.5a.75.75 0 000-1.5H9V3.5z"/></svg>'}),b=(new u.LabIcon({name:"amphi:play-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M3 3.814C3 2.436 4.52 1.6 5.684 2.334l6.628 4.186a1.75 1.75 0 010 2.96l-6.628 4.185C4.52 14.401 3 13.564 3 12.185v-8.37zm1.883-.211a.25.25 0 00-.383.211v8.372a.25.25 0 00.383.211l6.628-4.186a.25.25 0 000-.422L4.884 3.603z" clip-rule="evenodd"/></svg>'}),new u.LabIcon({name:"amphi:play-circle-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M7.421 4.356A1.25 1.25 0 005.5 5.411v5.178a1.25 1.25 0 001.921 1.055l4.069-2.59a1.25 1.25 0 000-2.109L7.42 4.356zM10.353 8L7 10.134V5.866L10.353 8z"/><path d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"/></g></svg>'})),y=new u.LabIcon({name:"amphi:crosshair-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8.75 6.457V12.75a.75.75 0 00-1.5 0v1.707A6.503 6.503 0 011.543 8.75H3.25a.75.75 0 000-1.5H1.543A6.503 6.503 0 017.25 1.543V3.25a.75.75 0 001.5 0V1.543a6.503 6.503 0 015.707 5.707H12.75a.75.75 0 000 1.5h1.707a6.503 6.503 0 01-5.707 5.707z" clip-rule="evenodd"/></svg>'}),E=new u.LabIcon({name:"amphi:warning-icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M8 1a2.143 2.143 0 00-1.827 1.024l-5.88 9.768a2.125 2.125 0 00.762 2.915c.322.188.687.289 1.06.293h11.77a2.143 2.143 0 001.834-1.074 2.126 2.126 0 00-.006-2.124L9.829 2.028A2.149 2.149 0 008 1zM7 11a1 1 0 011-1h.007a1 1 0 110 2H8a1 1 0 01-1-1zm1.75-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z" clip-rule="evenodd"/></svg>'}),N=({field:e,handleChange:t,initialValues:a})=>{const[n,l]=(0,s.useState)(a||[{key:"",value:""}]),o=(a,s,i)=>{const o=[...n];o[s]={...o[s],[i]:a.target.value},l(o),t(o,e.id)};return i().createElement("div",null,n.map(((a,s)=>i().createElement("div",{key:s,className:"col-span-1 flex items-center space-x-2"},i().createElement("input",{type:"text",name:`${e.id}_key_${s}`,placeholder:"Key",id:`${e.id}_key_${s}`,value:a.key,onChange:e=>o(e,s,"key"),className:"mt-1 h-6 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs"}),i().createElement("input",{type:"text",name:`${e.id}_value_${s}`,placeholder:"Value",id:`${e.id}_value_${s}`,value:a.value,onChange:e=>o(e,s,"value"),className:"mt-1 h-6 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs"}),i().createElement("button",{type:"button",onClick:()=>(a=>{const s=[...n];s.splice(a,1),l(s),t(s,e.id)})(s),className:"nodrag flex flex-col justify-center items-center mt-1 w-9 h-6 rounded-sm bg-gray-500 text-white shadow-sm sm:text-xs"},i().createElement(w.react,{className:""}))))),i().createElement("button",{type:"button",onClick:()=>{l([...n,{key:"",value:""}]),t(n,e.id)},className:"nodrag flex flex-col justify-center items-center mt-2 w-9 h-6 rounded-sm bg-gray-500 text-white shadow-sm sm:text-xs"},i().createElement(x.react,{className:""})))};var C=a(243),k=a.n(C),_=a(150),L=a(199),F=a(647),P=a(461),D=a(763),I=a(798),z=a(363),V=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],A=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),n=String(t.getOptionValue(e)).toLowerCase(),l=String(t.getOptionLabel(e)).toLowerCase();return n===a||l===a},M={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,a,n){return!(!e||t.some((function(t){return A(e,t,n)}))||a.some((function(t){return A(e,t,n)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};a(628),a(468);var O=(0,s.forwardRef)((function(e,t){var a=function(e){var t=e.allowCreateWhileLoading,a=void 0!==t&&t,n=e.createOptionPosition,l=void 0===n?"last":n,i=e.formatCreateLabel,o=void 0===i?M.formatCreateLabel:i,r=e.isValidNewOption,c=void 0===r?M.isValidNewOption:r,d=e.getNewOptionData,m=void 0===d?M.getNewOptionData:d,p=e.onCreateOption,h=e.options,u=void 0===h?[]:h,g=e.onChange,v=(0,I.A)(e,V),f=v.getOptionValue,w=void 0===f?L.g:f,x=v.getOptionLabel,b=void 0===x?L.b:x,y=v.inputValue,E=v.isLoading,N=v.isMulti,C=v.value,k=v.name,_=(0,s.useMemo)((function(){return c(y,(0,z.H)(C),u,{getOptionValue:w,getOptionLabel:b})?m(y,o(y)):void 0}),[o,m,b,w,y,c,u,C]),F=(0,s.useMemo)((function(){return!a&&E||!_?u:"first"===l?[_].concat((0,D.A)(u)):[].concat((0,D.A)(u),[_])}),[a,l,E,_,u]),A=(0,s.useCallback)((function(e,t){if("select-option"!==t.action)return g(e,t);var a=Array.isArray(e)?e:[e];if(a[a.length-1]!==_)g(e,t);else if(p)p(y);else{var n=m(y,y),l={action:"create-option",name:k,option:n};g((0,z.D)(N,[].concat((0,D.A)((0,z.H)(C)),[n]),n),l)}}),[m,y,N,k,_,p,g,C]);return(0,P.A)((0,P.A)({},v),{},{options:F,onChange:A})}((0,F.u)(e));return s.createElement(L.S,(0,_.A)({ref:t},a))})),$=O;const S=e=>i().createElement("div",null,i().createElement("span",null,e.label),i().createElement("span",null,e.options.length)),B={control:(e,t)=>({...e,minHeight:"1.5rem",height:"1.5rem",padding:"0px",margin:"0px",borderRadius:"0.125rem",borderColor:"#E2E8F0",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",zIndex:9999}),valueContainer:(e,t)=>({...e,padding:"0px",margin:"0px",marginLeft:"0.25rem"}),singleValue:(e,t)=>({...e,marginLeft:"0px",marginRight:"0px",fontSize:"12px",color:"#525252"}),input:(e,t)=>({...e,fontSize:"12px",color:"#525252",margin:"0px"}),indicatorSeparator:e=>({}),indicatorsContainer:(e,t)=>({...e,padding:"0px"}),dropdownIndicator:(e,t)=>({...e,padding:"0px",display:"flex",justifyContent:"flex-end",width:"35px"}),menuPortal:e=>({...e,zIndex:9999}),menu:e=>({...e,backgroundColor:"white",borderRadius:"0.125rem"}),option:e=>({...e,height:"auto",minHeight:"1.5rem",lineHeight:"1.5rem",padding:"0px 10px"})},H=({field:e,handleChange:t,defaultValue:a,inDialog:n,creatable:l})=>{const o=t=>e.options.find((e=>e.value===t))||{value:t,label:t},[r,c]=(0,s.useState)(o(a)),[d,m]=(0,s.useState)(!1);(0,s.useEffect)((()=>{c(o(a))}),[a,e.options]);const p=l?$:k();return i().createElement(p,{className:"nodrag nowheel mt-1 sm:h-6 h-7 w-full sm:text-xs text-sm",classNamePrefix:"component_select",styles:B,onChange:a=>{c(a),t(null==a?void 0:a.value,e.id)},options:e.options,value:r,formatGroupLabel:S,placeholder:e.placeholder||"Select ...",formatCreateLabel:e=>`Use "${e}"`,menuPlacement:"auto",maxMenuHeight:180,isDisabled:d,menuPortalTarget:document.body,theme:e=>({...e,colors:{...e.colors,primary25:"#F0F5F7",primary:"#6B7380"}})})},j=({field:e,handleChange:t,initialValues:a})=>{const[n,l]=(0,s.useState)(a||[""]);return i().createElement("div",null,n.map(((a,s)=>i().createElement("div",{key:s,className:"flex items-center space-x-2"},i().createElement("input",{type:"text",name:`${e.id}_value_${s}`,placeholder:"Value",id:`${e.id}_value_${s}`,value:a,onChange:a=>((a,s)=>{const i=[...n];i[s]=a.target.value,l(i),t(i,e.id)})(a,s),className:"mt-1 h-6 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs"}),i().createElement("button",{type:"button",onClick:()=>(a=>{const s=[...n];s.splice(a,1),l(s),t(s,e.id)})(s),className:"nodrag flex flex-col justify-center items-center mt-1 w-9 h-6 rounded-sm bg-gray-500 text-white shadow-sm sm:text-xs"},i().createElement(w.react,{className:""}))))),i().createElement("button",{type:"button",onClick:()=>{l([...n,""]),t(n,e.id)},className:"nodrag flex flex-col justify-center items-center mt-2 w-9 h-6 rounded-sm bg-gray-500 text-white shadow-sm sm:text-xs"},i().createElement(x.react,{className:""})))},R=({nodeId:e,store:t,setNodes:a,defaultConfig:n})=>{const{nodeInternals:l}=t.getState();a(Array.from(l.values()).map((t=>(t.id===e&&0===Object.keys(t.data).length&&(t.data={...n}),t))))},T=({evtTargetValue:e,field:t,nodeId:a,store:n,setNodes:l})=>{const s=e,{nodeInternals:i}=n.getState();l(Array.from(i.values()).map((e=>{if(e.id===a){let a=t.split(".");if(1===a.length)e.data={...e.data,[t]:s};else{const[t,n]=a;e.data={...e.data,[t]:{...e.data[t],[n]:s}}}}return e})))},q=({nodeId:e,type:t,name:a,form:n,data:l,context:o,manager:r,commands:c,handleChange:d})=>{const[m,p]=(0,s.useState)(!1);return i().createElement("div",{className:n.idPrefix},W({name:a,nodeId:e,form:n,data:l,context:o,manager:r,commands:c,handleChange:d,advanced:!1}),i().createElement("div",{className:"flex justify-center mt-1 pt-1.5 space-x-4"},i().createElement("span",{onClick:()=>{p(!0)},className:"inline-flex items-center justify-center cursor-pointer group"},i().createElement(v.react,{className:"h-3 w-3 group-hover:text-primary"})),!t.includes("output")&&i().createElement("span",{onClick:()=>{c.execute("pipeline-editor:run-pipeline-until",{nodeId:e})},className:"inline-flex items-center justify-center cursor-pointer group"},i().createElement(b.react,{className:"h-3 w-3 group-hover:text-primary"}))),m&&i().createElement(U,{onClose:()=>{p((e=>!e))},name:a,nodeId:e,form:n,data:l,context:o,manager:r,commands:c,handleChange:d,advanced:!0}))},W=({name:e,nodeId:t,form:a,data:n,context:l,manager:c,commands:d,handleChange:p,advanced:u})=>i().createElement(i().Fragment,null,a.fields.map(((e,t)=>{if(!u&&e.advanced)return null;let a,d=[];const g=e.id.split(".");if(Array.isArray(n[e.id]))d=n[e.id];else if(1===g.length)void 0!==n[e.id]&&(a=n[e.id]);else{const[e,t]=g;n[e]&&void 0!==n[e][t]&&(a=n[e][t])}let v="";const[w,x]=(0,s.useState)(!1);switch((0,s.useEffect)((()=>{(t=>{if(e.validation){const a=new RegExp(e.validation,"i");x(!a.test(t))}else x(!1)})(a)}),[a]),e.type){case"input":return i().createElement("div",{className:"col-span-1"},i().createElement("label",{className:"component_label"},e.label),i().createElement("input",{id:e.id,name:e.id,onChange:t=>p(t.target.value,e.id),value:a,className:"nodrag mt-1 sm:h-6 h-7 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs text-sm pl-1 pr-1",placeholder:e.placeholder,autoComplete:"off"}));case"file":return i().createElement("div",{className:"col-span-2"},i().createElement("div",{className:"flex items-center space-x-2"},i().createElement("label",{className:"component_label"},e.label),w&&i().createElement("div",{className:"form-indicator relative flex items-center"},i().createElement(E.react,{className:"w-3 h-3 text-yellow-500 cursor-default self-center",title:e.validationMessage}))),i().createElement("div",{className:"flex items-center space-x-2"},i().createElement("input",{id:e.id,name:e.id,onChange:t=>{p(t.target.value,e.id)},value:a,className:"nodrag mt-1 sm:h-6 h-7 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs text-sm pl-1 pr-1 ${isInvalid ? 'outline outline-2 outline-yellow-500' : ''",placeholder:e.placeholder,required:!0,autoComplete:"off"}),i().createElement("button",{type:"button",onClick:async()=>{o.PathExt.resolve("/",o.PathExt.dirname(l.path));const t=await(async(e,t)=>{const a=await h.init({manager:e,filter:t.filter,multiselect:t.multiselect,includeDir:t.includeDir,rootPath:t.rootPath,startPath:t.startPath,acceptFileOnDblClick:!Object.prototype.hasOwnProperty.call(t,"acceptFileOnDblClick")||t.acceptFileOnDblClick}),n=new r.Dialog({title:"Select a file",body:a,buttons:[r.Dialog.cancelButton(),r.Dialog.okButton({label:"Select"})]});return n.addClass("amphi-browseFileDialog"),document.body.className+=` ${m}`,n.launch().then((e=>{if(document.body.className=document.body.className.replace(m,"").trim(),t.rootPath&&e.button.accept&&e.value.length){const a=t.rootPath.endsWith("/")?t.rootPath:t.rootPath+"/";e.value.forEach((e=>{e.path=e.path.replace(a,"")}))}return e}))})(c,{multiselect:!1,includeDir:!0,rootPath:o.PathExt.dirname(l.path),filter:e=>e.path!==l.path});p(t.value[0].path,e.id)},className:"nodrag flex flex-col justify-center items-center mt-1 w-7 sm:h-6 h-7 rounded-sm text-white shadow-sm sm:text-xs text-sm bg-gray-500"},i().createElement(f.react,{className:""}))));case"column":return i().createElement("div",{className:"col-span-2"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("div",{className:"flex items-center space-x-2"},i().createElement("input",{id:e.id,name:e.id,onChange:t=>p(t.target.value,e.id),value:a,className:"nodrag mt-1 sm:h-6 h-7 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs text-sm pl-1 pr-1",placeholder:e.placeholder,autoComplete:"off",required:!0}),i().createElement("button",{type:"button",onClick:async()=>{},className:"nodrag flex flex-col justify-center items-center mt-1 w-7 sm:h-6 h-7 rounded-sm bg-gray-500 text-white shadow-sm sm:text-xs text-sm"},i().createElement(y.react,{className:""}))));case"select":return i().createElement("div",{key:t,className:"col-span-1"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("select",{id:e.id,className:"nodrag mt-1 sm:h-6 h-7 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs text-sm pl-1 pr-1",onChange:t=>p(t.target.value,e.id),value:a},e.options.map((e=>i().createElement("option",{key:e.key,value:e.value,selected:e.selected},e.text)))));case"singleInputCreatableSelect":return i().createElement("div",{key:t,className:"col-span-2"},i().createElement("label",{className:"component_label"},e.label),i().createElement(H,{field:e,handleChange:p,defaultValue:a,inDialog:u,creatable:!0}));case"singleInputSelect":return i().createElement("div",{key:t,className:"col-span-2"},i().createElement("label",{className:"component_label"},e.label),i().createElement(H,{field:e,handleChange:p,defaultValue:a,inDialog:u,creatable:!1}));case"datalist":return v=Math.random().toString().slice(2),i().createElement("div",{key:t,className:"col-span-1"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("div",{className:"relative mt-1.5"},i().createElement("input",{type:"text",list:`${e.id}${v}`,id:e.id,className:"keepDatalist nodrag w-full sm:h-6 h-7 rounded-sm border-gray-300 pe-10 text-gray-700 sm:text-xs text-sm [&::-webkit-calendar-picker-indicator]:opacity-0 pl-1 pr-1",onChange:t=>p(t.target.value,e.id),defaultValue:a,autoComplete:"off",placeholder:e.placeholder}),i().createElement("span",{className:"absolute inset-y-0 end-0 flex w-4 items-center"},i().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-5 w-5 text-gray-500"},i().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})))),i().createElement("datalist",{className:"nodrag",id:`${e.id}${v}`},e.options.map((e=>i().createElement("option",{value:e.value,selected:e.selected},e.text)))));case"textarea":return i().createElement("div",{key:t,className:"col-span-2"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("textarea",{id:e.id,name:e.id,onChange:t=>p(t.target.value,e.id),value:a,className:"nodrag mt-2 w-full rounded-sm border-gray-200 align-top shadow-sm sm:text-xs text-sm ",placeholder:e.placeholder}));case"boolean":return i().createElement("div",{key:t,className:"col-span-1 block"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("label",{htmlFor:e.id,className:"relative h-8 w-14 cursor-pointer rounded-full bg-gray-300 transition [-webkit-tap-highlight-color:_transparent] has-[:checked]:bg-green-500"},i().createElement("input",{type:"checkbox",id:e.id,name:e.id,onChange:t=>p(t.target.checked,e.id),className:"peer sr-only [&:checked_+_span_svg[data-checked-icon]]:block [&:checked_+_span_svg[data-unchecked-icon]]:hidden",checked:a}),i().createElement("span",{className:"absolute inset-y-0 start-0 z-10 m-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-white text-gray-400 transition-all peer-checked:start-6 peer-checked:text-green-600"},i().createElement("svg",{"data-unchecked-icon":!0,xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},i().createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})),i().createElement("svg",{"data-checked-icon":!0,xmlns:"http://www.w3.org/2000/svg",className:"hidden h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},i().createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),i().createElement("span",{className:"absolute inset-0 rounded-full bg-grey-300 transition peer-checked:bg-green-500"})));case"radio":return v=Math.random().toString().slice(2),i().createElement("div",{key:t,className:"col-span-2"},i().createElement("fieldset",{className:"flex flex-wrap gap-3"},i().createElement("legend",{className:"sr-only"},`sep${v}`),i().createElement("label",{className:"component_label",htmlFor:`${e.id}${v}`},e.label),i().createElement("div",{className:"grid grid-cols-3 gap-2 w-full max-w-screen-sm"},e.options.map(((t,n)=>i().createElement("div",{key:t.key},i().createElement("input",{type:"radio",name:`${e.id}${v}`,value:t.value,id:`${t.key}-${v}`,className:"peer hidden h-5",onChange:t=>p(t.target.value,e.id),checked:a===t.value}),i().createElement("label",{htmlFor:`${t.key}-${v}`,className:"flex cursor-pointer items-center justify-center rounded-sm bg-white px-2 py-1 sm:text-xs text-sm font-medium peer-checked:bg-gray-500 peer-checked:text-white"},i().createElement("p",null,t.text))))))));case"keyvalue":return i().createElement("div",{key:t,className:"col-span-2"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement(N,{field:e,handleChange:p,initialValues:d}));case"valuesList":return i().createElement("div",{key:t,className:"col-span-2"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement(j,{field:e,handleChange:p,initialValues:d}));case"quantity":return i().createElement("div",{className:"col-span-1"},i().createElement("label",{className:"component_label",htmlFor:e.id},e.label),i().createElement("input",{id:e.id,name:e.id,onChange:t=>p(t.target.value,e.id),value:a,placeholder:e.placeholder,inputMode:"numeric",type:"number",className:"nodrag mt-1 sm:h-6 h-7 w-full rounded-sm border-gray-200 shadow-sm sm:text-xs text-sm"}));default:return null}})));function U({name:e,nodeId:t,form:a,data:n,context:o,manager:r,commands:c,handleChange:d,advanced:m,onClose:p}){const[h,u]=(0,s.useState)(!0),g=()=>{u(!1),p()};return i().createElement(l.Transition.Root,{show:h,as:s.Fragment},i().createElement(l.Dialog,{as:"div",className:"relative z-10",onClose:g},i().createElement(l.Transition.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},i().createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),i().createElement("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto"},i().createElement("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},i().createElement(l.Transition.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},i().createElement(l.Dialog.Panel,{className:"relative transform overflow-hidden bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl"},i().createElement("div",{id:"advanced-config-dialog",className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},i().createElement("div",{className:"w-full"},i().createElement("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},i().createElement(l.Dialog.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900"},e),i().createElement("div",{className:"mt-2 grid grid-cols-2 gap-4"},W({name:e,nodeId:t,form:a,data:n,context:o,manager:r,commands:c,handleChange:d,advanced:!0}))))),i().createElement("div",{className:"bg-grey-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},i().createElement("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary sm:ml-3 sm:w-auto",onClick:g},"OK"))))))))}const K=({type:e,Handle:t,Position:a})=>{switch(e){case"pandas_df_input":return i().createElement(t,{className:"handle-right",type:"source",position:a.Right,id:"out"});case"pandas_df_output":return i().createElement(t,{className:"handle-left",type:"target",position:a.Left,id:"int"});case"pandas_df_processor":return i().createElement(i().Fragment,null,i().createElement(t,{className:"handle-left",type:"target",position:a.Left,id:"in"}),i().createElement(t,{className:"handle-right",type:"source",position:a.Right,id:"out"}));default:return null}},G=({id:e,data:t,context:a,manager:n,commands:l,name:s,ConfigForm:o,Icon:r,showContent:c,handle:d,deleteNode:m,setViewport:p})=>i().createElement(i().Fragment,null,i().createElement("div",{className:"component",onDoubleClick:()=>{p({zoom:1.2,duration:500})}},i().createElement("div",{className:"component__header"},s,i().createElement("div",{onClick:m,className:"deletebutton"},i().createElement(g.react,{className:"group-hover:text-primary"}))),i().createElement("div",{className:"component__body"},i().createElement("form",null,c?o:i().createElement("div",{className:"placeholder"},i().createElement(r.react,{top:"8px",height:"32px",width:"32px;",color:"#5A8F7B",verticalAlign:"middle"})))),d));function J(){return class{constructor(){}static getInstance(){return this.instance||(this.instance=new this),this.instance}static get Name(){return this.getInstance()._name}static get Type(){return this.getInstance()._type}static get Icon(){return this.getInstance()._icon}static get Default(){return this.getInstance()._default}static get Form(){return this.getInstance()._form}}}const Q=new n.Token("@amphi/pipeline-components-manager:provider");class X{constructor(){this._components=[],this._components=[]}getComponents(){return this._components}getComponent(e){return this._components.find((t=>t._id===e))}addComponent(e){this._components.push(e)}getComponentCount(){return this._components.length}}const Y={id:"@amphi/pipeline-components-manager:plugin",description:'Provider plugin for the pipeline editor\'s "component" service object.',autoStart:!0,provides:Q,activate:()=>(console.log("JupyterLab extension (@amphi/pipeline-components-manager/provider plugin) is activated!"),new X)}}}]);