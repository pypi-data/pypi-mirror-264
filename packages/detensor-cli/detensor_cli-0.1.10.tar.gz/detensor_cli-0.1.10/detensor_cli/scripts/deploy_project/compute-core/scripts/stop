#! /usr/bin/env python3

from fcntl import fcntl
import fcntl
from common import PID_FILENAME, init_pwd, stop_and_clean_pid



def main():
    init_pwd()
    try:
        with open(PID_FILENAME, 'r+') as pid_f:
            fcntl.lockf(pid_f, fcntl.LOCK_EX)
            stop_and_clean_pid(pid_f)
    except FileNotFoundError as e:
        print('no pid file')

if __name__ == '__main__':
    main()