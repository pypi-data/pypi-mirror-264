"use strict";(self.webpackChunk_datalayer_jupyter_kernels=self.webpackChunk_datalayer_jupyter_kernels||[]).push([[68],{34160:(t,e,s)=>{s.d(e,{m:()=>n});var n,i=s(92279),a=s(71204);!function(t){t.getBoolean=function(t){return(0,a.vC)({...t,body:new r(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})],focusNodeSelector:"input"})},t.getNumber=function(t){return(0,a.vC)({...t,body:new h(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})],focusNodeSelector:"input"})},t.getItem=function(t){return(0,a.vC)({...t,body:new d(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})],focusNodeSelector:t.editable?"input":"select"})},t.getMultipleItems=function(t){return(0,a.vC)({...t,body:new u(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})]})},t.getText=function(t){return(0,a.vC)({...t,body:new l(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})],focusNodeSelector:"input"})},t.getPassword=function(t){return(0,a.vC)({...t,body:new c(t),buttons:[a.Vq.cancelButton({label:t.cancelLabel}),a.Vq.okButton({label:t.okLabel})],focusNodeSelector:"input"})}}(n||(n={}));class o extends i.$L{constructor(t){if(super(),this.addClass("jp-Input-Dialog"),this._input=document.createElement("input"),this._input.classList.add("jp-mod-styled"),this._input.id="jp-dialog-input-id",void 0!==t){const e=document.createElement("label");e.textContent=t,e.htmlFor=this._input.id,this.node.appendChild(e)}this.node.appendChild(this._input)}}class r extends o{constructor(t){super(t.label),this.addClass("jp-Input-Boolean-Dialog"),this._input.type="checkbox",this._input.checked=!!t.value}getValue(){return this._input.checked}}class h extends o{constructor(t){super(t.label),this._input.type="number",this._input.value=t.value?t.value.toString():"0"}getValue(){return this._input.value?Number(this._input.value):Number.NaN}}class l extends o{constructor(t){var e;super(t.label),this._input.type="text",this._input.value=t.text?t.text:"",t.placeholder&&(this._input.placeholder=t.placeholder),this._initialSelectionRange=Math.min(this._input.value.length,Math.max(0,null!==(e=t.selectionRange)&&void 0!==e?e:this._input.value.length))}onAfterAttach(t){super.onAfterAttach(t),this._initialSelectionRange>0&&this._input.value&&this._input.setSelectionRange(0,this._initialSelectionRange)}getValue(){return this._input.value}}class c extends o{constructor(t){super(t.label),this._input.type="password",this._input.value=t.text?t.text:"",t.placeholder&&(this._input.placeholder=t.placeholder)}onAfterAttach(t){super.onAfterAttach(t),this._input.value&&this._input.select()}getValue(){return this._input.value}}class d extends o{constructor(t){super(t.label),this._editable=t.editable||!1;let e,s=t.current||0;if("number"==typeof s&&(e=Math.max(0,Math.min(s,t.items.length-1)),s=""),this._list=document.createElement("select"),t.items.forEach(((t,n)=>{const i=document.createElement("option");n===e&&(i.selected=!0,s=t),i.value=t,i.textContent=t,this._list.appendChild(i)})),t.editable){const e=document.createElement("datalist");e.id="input-dialog-items",e.appendChild(this._list),this._input.type="list",this._input.value=s,this._input.setAttribute("list",e.id),t.placeholder&&(this._input.placeholder=t.placeholder),this.node.appendChild(e)}else this._input.remove(),this.node.appendChild(this._list)}getValue(){return this._editable?this._input.value:this._list.value}}class u extends o{constructor(t){super(t.label);let e=t.defaults||[];this._list=document.createElement("select"),this._list.setAttribute("multiple",""),t.items.forEach((t=>{const e=document.createElement("option");e.value=t,e.textContent=t,this._list.appendChild(e)})),this._input.remove(),this.node.appendChild(this._list);const s=this._list.options;for(let t=0;t<s.length;t++){const n=s[t];e.includes(n.value)?n.selected=!0:n.selected=!1}}getValue(){let t=[];for(let e of this._list.options)e.selected&&!e.classList.contains("hidden")&&t.push(e.value||e.text);return t}}},26855:(t,e,s)=>{s.d(e,{B2:()=>c,eT:()=>d,gQ:()=>l,oQ:()=>h});var n,i=s(71204),a=s(48425),o=s(18168),r=s(92279);function h(t,e,s){const n=(s=s||o.Sr).load("jupyterlab"),a=e.localPath.split("/").pop()||e.localPath;return(0,i.vC)({title:n.__("Rename File"),body:new u(a),focusNodeSelector:"input",buttons:[i.Vq.cancelButton(),i.Vq.okButton({label:n.__("Rename"),ariaLabel:n.__("Rename File")})]}).then((t=>t.value?d(t.value)?e.rename(t.value):((0,i.UW)(n.__("Rename Error"),Error(n.__('"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',t.value))),null):null))}function l(t,e,s){return t.rename(e,s).catch((n=>{if(409!==n.response.status)throw n;return c(s).then((n=>n?t.overwrite(e,s):Promise.reject("File not renamed")))}))}function c(t,e){const s=(e=e||o.Sr).load("jupyterlab"),n={title:s.__("Overwrite file?"),body:s.__('"%1" already exists, overwrite?',t),buttons:[i.Vq.cancelButton(),i.Vq.warnButton({label:s.__("Overwrite"),ariaLabel:s.__("Overwrite Existing File")})]};return(0,i.vC)(n).then((t=>Promise.resolve(t.button.accept)))}function d(t){return t.length>0&&!/[\/\\:]/.test(t)}class u extends r.$L{constructor(t){super({node:n.createRenameNode(t)}),this.addClass("jp-FileDialog");const e=a.PathExt.extname(t),s=this.inputNode.value=a.PathExt.basename(t);this.inputNode.setSelectionRange(0,s.length-e.length)}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}!function(t){t.createRenameNode=function(t,e){const s=(e=e||o.Sr).load("jupyterlab"),n=document.createElement("div"),i=document.createElement("label");i.textContent=s.__("File Path");const a=document.createElement("span");a.textContent=t;const r=document.createElement("label");r.textContent=s.__("New Name"),r.className="jp-new-name-title";const h=document.createElement("input");return n.appendChild(i),n.appendChild(a),n.appendChild(r),n.appendChild(h),n}}(n||(n={}))},79308:(t,e,s)=>{s.d(e,{V:()=>C});var n,i=s(99190),a=s(48425),o=s(71204),r=s(81631),h=s(18168),l=s(47963),c=s(16781),d=s(98209),u=s(92279);class _{constructor(t){var e,s;this._isReady=!1,this._isDisposed=!1,this._isPopulated=!1,this._path="",this._lineEnding=null,this._contentsModel=null,this._populatedPromise=new l.PromiseDelegate,this._pathChanged=new d.Signal(this),this._fileChanged=new d.Signal(this),this._saveState=new d.Signal(this),this._disposed=new d.Signal(this),this._lastModifiedCheckMargin=500,this._timeConflictModalIsOpen=!1;const o=this._manager=t.manager;this.translator=t.translator||h.Sr,this._trans=this.translator.load("jupyterlab"),this._factory=t.factory,this._dialogs=null!==(e=t.sessionDialogs)&&void 0!==e?e:new i.H({translator:t.translator}),this._opener=t.opener||n.noOp,this._path=this._manager.contents.normalize(t.path),this._lastModifiedCheckMargin=t.lastModifiedCheckMargin||500;const c=this._manager.contents.localPath(this._path),u=this._factory.preferredLanguage(a.PathExt.basename(c)),_=this._manager.contents.getSharedModelFactory(this._path),p=null==_?void 0:_.createNew({path:c,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:u,sharedModel:p,collaborationEnabled:null!==(s=null==_?void 0:_.collaborative)&&void 0!==s&&s}),this._readyPromise=o.ready.then((()=>this._populatedPromise.promise));const g=a.PathExt.extname(this._path);this.sessionContext=new i.B({sessionManager:o.sessions,specsManager:o.kernelspecs,path:c,type:".ipynb"===g?"notebook":"file",name:a.PathExt.basename(c),kernelPreference:t.kernelPreference||{shouldStart:!1},setBusy:t.setBusy}),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),o.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new r.D.UrlResolver({path:this._path,contents:o.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(t){this._lastModifiedCheckMargin=t}get model(){return this._model}get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),d.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){var t;return!(!(null===(t=this._contentsModel)||void 0===t?void 0:t.writable)||this._model.collaborative)}async initialize(t){t?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(t){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(t)))))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const t=this._manager.contents.localPath(this.path),e=await n.getSavePath(t);if(this.isDisposed||!e)return;const s=this._manager.contents.driveName(this.path),i=""==s?e:`${s}:${e}`;if(i===this._path)return this.save();try{await this._manager.ready,await this._manager.contents.get(i),await this._maybeOverWrite(i)}catch(t){if(!t.response||404!==t.response.status)throw t;await this._finishSaveAs(i)}}async download(){const t=await this._manager.contents.getDownloadUrl(this._path),e=document.createElement("a");e.href=t,e.download="",document.body.appendChild(e),e.click(),document.body.removeChild(e)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const t=this._manager.contents;return this._manager.ready.then((()=>t.createCheckpoint(this._path)))}deleteCheckpoint(t){const e=this._manager.contents;return this._manager.ready.then((()=>e.deleteCheckpoint(this._path,t)))}restoreCheckpoint(t){const e=this._manager.contents,s=this._path;return this._manager.ready.then((()=>t?e.restoreCheckpoint(s,t):this.listCheckpoints().then((n=>{if(!this.isDisposed&&n.length)return t=n[n.length-1].id,e.restoreCheckpoint(s,t)}))))}listCheckpoints(){const t=this._manager.contents;return this._manager.ready.then((()=>t.listCheckpoints(this._path)))}addSibling(t,e={}){const s=this._opener;return s&&s(t,e),new c.DisposableDelegate((()=>{t.close()}))}_onFileChanged(t,e){var s;if("rename"!==e.type)return;let n=e.oldValue&&e.oldValue.path,i=e.newValue&&e.newValue.path;if(i&&0===this._path.indexOf(n||"")){let t=e.newValue;n!==this._path&&(i=this._path.replace(new RegExp(`^${n}/`),`${i}/`),n=this._path,t={last_modified:null===(s=e.newValue)||void 0===s?void 0:s.created,path:i}),this._updateContentsModel({...this._contentsModel,...t}),this._updatePath(i)}}_onSessionChanged(t,e){if("path"!==e)return;const s=this._manager.contents.driveName(this.path);let n=this.sessionContext.session.path;s&&(n=`${s}:${n}`),this._updatePath(n)}_updateContentsModel(t){var e,s;const n=t.writable&&!this._model.collaborative,i={path:t.path,name:t.name,type:t.type,writable:n,created:t.created,last_modified:t.last_modified,mimetype:t.mimetype,format:t.format},a=null!==(s=null===(e=this._contentsModel)||void 0===e?void 0:e.last_modified)&&void 0!==s?s:null;this._contentsModel=i,a&&i.last_modified===a||this._fileChanged.emit(i)}_updatePath(t){var e,s,n,i;if(this._path===t)return;this._path=t;const o=this._manager.contents.localPath(t),r=a.PathExt.basename(o);if((null===(e=this.sessionContext.session)||void 0===e?void 0:e.path)!==o&&(null===(s=this.sessionContext.session)||void 0===s||s.setPath(o)),(null===(n=this.sessionContext.session)||void 0===n?void 0:n.name)!==r&&(null===(i=this.sessionContext.session)||void 0===i||i.setName(r)),this.urlResolver.path!==t&&(this.urlResolver.path=t),this._contentsModel&&(this._contentsModel.path!==t||this._contentsModel.name!==r)){const e={...this._contentsModel,name:r,path:t};this._updateContentsModel(e)}this._pathChanged.emit(t)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const t=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:t,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then((t=>{t&&this._dialogs.selectKernel(this.sessionContext)}))}async _rename(t){const e=this.localPath.split("/");e[e.length-1]=t;let s=a.PathExt.join(...e);const n=this._manager.contents.driveName(this.path);n&&(s=`${n}:${s}`),await this._manager.contents.rename(this.path,s)}async _save(){this._saveState.emit("started");const t=this._createSaveOptions();try{await this._manager.ready;const e=await this._maybeSave(t);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(e),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(t){const{name:e}=t;if("ModalCancelError"===e||"ModalDuplicateError"===e)throw t;const s=this._manager.contents.localPath(this._path),n=a.PathExt.basename(s);throw this._handleError(t,this._trans.__("File Save Error for %1",n)),this._saveState.emit("failed"),t}}_revert(t=!1){const e={type:this._factory.contentType,content:null!==this._factory.fileFormat,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{}},s=this._path,n=this._model;return this._manager.ready.then((()=>this._manager.contents.get(s,e))).then((t=>{if(!this.isDisposed){if(t.content)if("json"===t.format)n.fromJSON(t.content);else{let e=t.content;-1!==e.indexOf("\r\n")?(this._lineEnding="\r\n",e=e.replace(/\r\n/g,"\n")):-1!==e.indexOf("\r")?(this._lineEnding="\r",e=e.replace(/\r/g,"\n")):this._lineEnding=null,n.fromString(e)}return this._updateContentsModel(t),n.dirty=!1,this._isPopulated?void 0:this._populate()}})).catch((async t=>{const e=this._manager.contents.localPath(this._path),s=a.PathExt.basename(e);throw this._handleError(t,this._trans.__("File Load Error for %1",s)),t}))}_maybeSave(t){const e=this._path;return this._manager.contents.get(e,{content:!1}).then((s=>{var n;if(this.isDisposed)return Promise.reject(new Error("Disposed"));const i=this._lastModifiedCheckMargin,a=null===(n=this.contentsModel)||void 0===n?void 0:n.last_modified,o=a?new Date(a):new Date,r=new Date(s.last_modified);return a&&r.getTime()-o.getTime()>i?this._timeConflict(o,s,t):this._manager.contents.save(e,t)}),(s=>{if(s.response&&404===s.response.status)return this._manager.contents.save(e,t);throw s}))}async _handleError(t,e){await(0,o.UW)(e,t)}_maybeCheckpoint(t){let e=Promise.resolve(void 0);return this.canSave?(e=t?this.createCheckpoint().then():this.listCheckpoints().then((t=>{if(!this.isDisposed&&!t.length&&this.canSave)return this.createCheckpoint().then()})),e.catch((t=>{if(!t.response||403!==t.response.status)throw t}))):e}_timeConflict(t,e,s){const n=new Date(e.last_modified);if(console.warn(`Last saving performed ${t} while the current file seems to have been saved ${n}`),this._timeConflictModalIsOpen){const t=new Error("Modal is already displayed");return t.name="ModalDuplicateError",Promise.reject(t)}const i=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),a=o.Vq.okButton({label:this._trans.__("Revert"),actions:["revert"]}),r=o.Vq.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._timeConflictModalIsOpen=!0,(0,o.vC)({title:this._trans.__("File Changed"),body:i,buttons:[o.Vq.cancelButton(),a,r]}).then((t=>{if(this._timeConflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(t.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,s);if(t.button.actions.includes("revert"))return this.revert().then((()=>e));const n=new Error("Cancel");return n.name="ModalCancelError",Promise.reject(n)}))}_maybeOverWrite(t){const e=this._trans.__('"%1" already exists. Do you want to replace it?',t),s=o.Vq.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,o.vC)({title:this._trans.__("File Overwrite?"),body:e,buttons:[o.Vq.cancelButton(),s]}).then((e=>this.isDisposed?Promise.reject(new Error("Disposed")):e.button.accept?this._manager.contents.delete(t).then((()=>this._finishSaveAs(t))):void 0))}async _finishSaveAs(t){this._saveState.emit("started");try{await this._manager.ready;const e=this._createSaveOptions();await this._manager.contents.save(t,e),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(t){if("Cancel"===t.message||"Modal is already displayed"===t.message)throw t;const e=this._manager.contents.localPath(this._path),s=a.PathExt.basename(e);return this._handleError(t,this._trans.__("File Save Error for %1",s)),void this._saveState.emit("failed")}}_createSaveOptions(){let t=null;return"json"===this._factory.fileFormat?t=this._model.toJSON():(t=this._model.toString(),this._lineEnding&&(t=t.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:t}}}!function(t){t.getSavePath=function(t,s){const n=(s=s||h.Sr).load("jupyterlab"),i=o.Vq.okButton({label:n.__("Save"),accept:!0});return(0,o.vC)({title:n.__("Save File As…"),body:new e(t),buttons:[o.Vq.cancelButton(),i]}).then((t=>{var e;if(t.button.accept)return null!==(e=t.value)&&void 0!==e?e:void 0}))},t.noOp=function(){};class e extends u.$L{constructor(t){super({node:s(t)})}getValue(){return this.node.value}}function s(t){const e=document.createElement("input");return e.value=t,e}}(n||(n={}));var p,g=s(46931),m=s(41835),v=s(70711),f=s(8284);class C{constructor(t){var e;this._activateRequested=new d.Signal(this),this._contexts=[],this._isDisposed=!1,this._autosave=!0,this._autosaveInterval=120,this._lastModifiedCheckMargin=500,this._renameUntitledFileOnSave=!0,this._stateChanged=new d.Signal(this),this.translator=t.translator||h.Sr,this.registry=t.registry,this.services=t.manager,this._dialogs=null!==(e=t.sessionDialogs)&&void 0!==e?e:new i.H({translator:t.translator}),this._isConnectedCallback=t.isConnectedCallback||(()=>!0),this._opener=t.opener,this._when=t.when||t.manager.ready;const s=new f.K({registry:this.registry,translator:this.translator});s.activateRequested.connect(this._onActivateRequested,this),s.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=s,this._setBusy=t.setBusy}get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(t){if(this._autosave!==t){const e=this._autosave;this._autosave=t,this._contexts.forEach((e=>{const s=p.saveHandlerProperty.get(e);s&&(!0!==t||s.isActive?!1===t&&s.isActive&&s.stop():s.start())})),this._stateChanged.emit({name:"autosave",oldValue:e,newValue:t})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(t){if(this._autosaveInterval!==t){const e=this._autosaveInterval;this._autosaveInterval=t,this._contexts.forEach((e=>{const s=p.saveHandlerProperty.get(e);s&&(s.saveInterval=t||120)})),this._stateChanged.emit({name:"autosaveInterval",oldValue:e,newValue:t})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(t){if(this._widgetManager.confirmClosingDocument!==t){const e=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=t,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:e,newValue:t})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(t){if(this._lastModifiedCheckMargin!==t){const e=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=t,this._contexts.forEach((e=>{e.lastModifiedCheckMargin=t})),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:e,newValue:t})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(t){if(this._renameUntitledFileOnSave!==t){const e=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=t,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:e,newValue:t})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,d.Signal.clearData(this),this._contexts.forEach((t=>this._widgetManager.closeWidgets(t))),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(t){return this._widgetManager.cloneWidget(t)}closeAll(){return Promise.all(this._contexts.map((t=>this._widgetManager.closeWidgets(t)))).then((()=>{}))}closeFile(t){const e=this._contextsForPath(t).map((t=>this._widgetManager.closeWidgets(t)));return Promise.all(e).then((t=>{}))}contextForWidget(t){return this._widgetManager.contextForWidget(t)}copy(t,e){return this.services.contents.copy(t,e)}createNew(t,e="default",s){return this._createOrOpenDocument("create",t,e,s)}deleteFile(t){return this.services.sessions.stopIfNeeded(t).then((()=>this.services.contents.delete(t))).then((()=>(this._contextsForPath(t).forEach((t=>this._widgetManager.deleteWidgets(t))),Promise.resolve(void 0))))}duplicate(t){const e=a.PathExt.dirname(t);return this.services.contents.copy(t,e)}findWidget(t,e="default"){const s=a.PathExt.normalize(t);let n=[e];if("default"===e){const t=this.registry.defaultWidgetFactory(s);if(!t)return;n=[t.name]}else null===e&&(n=this.registry.preferredWidgetFactories(s).map((t=>t.name)));for(const t of this._contextsForPath(s))for(const e of n)if(null!==e){const s=this._widgetManager.findWidget(t,e);if(s)return s}}newUntitled(t){return"file"===t.type&&(t.ext=t.ext||".txt"),this.services.contents.newUntitled(t)}open(t,e="default",s,n){return this._createOrOpenDocument("open",t,e,s,n)}openOrReveal(t,e="default",s,n){const i=this.findWidget(t,e);return i?(this._opener.open(i,{type:e,...n}),i):this.open(t,e,s,null!=n?n:{})}overwrite(t,e){const s=`${e}.${l.UUID.uuid4()}`,n=()=>this.rename(s,e);return this.rename(t,s).then((()=>this.deleteFile(e))).then(n,n)}rename(t,e){return this.services.contents.rename(t,e)}_findContext(t,e){const s=this.services.contents.normalize(t);return(0,g.sE)(this._contexts,(t=>t.path===s&&t.factoryName===e))}_contextsForPath(t){const e=this.services.contents.normalize(t);return this._contexts.filter((t=>t.path===e))}_createContext(t,e,s){const n=new _({opener:(t,e)=>{this._widgetManager.adoptWidget(n,t),this._opener.open(t,e)},manager:this.services,factory:e,path:t,kernelPreference:s,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator}),i=new v.W({context:n,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return p.saveHandlerProperty.set(n,i),n.ready.then((()=>{this.autosave&&i.start()})),n.disposed.connect(this._onContextDisposed,this),this._contexts.push(n),n}_onContextDisposed(t){g.RO.removeFirstOf(this._contexts,t)}_widgetFactoryFor(t,e){const{registry:s}=this;if("default"===e){const n=s.defaultWidgetFactory(t);if(!n)return;e=n.name}return s.getWidgetFactory(e)}_createOrOpenDocument(t,e,s="default",n,i){const a=this._widgetFactoryFor(e,s);if(!a)return;const o=a.modelName||"text",r=this.registry.getModelFactory(o);if(!r)return;const h=this.registry.getKernelPreference(e,a.name,n);let l,c=Promise.resolve(void 0);if("open"===t)l=this._findContext(e,r.name)||null,l||(l=this._createContext(e,r,h),c=this._when.then((()=>l.initialize(!1))));else{if("create"!==t)throw new Error(`Invalid argument 'which': ${t}`);l=this._createContext(e,r,h),c=this._when.then((()=>l.initialize(!0)))}const d=this._widgetManager.createWidget(a,l);return this._opener.open(d,{type:a.name,...i}),c.catch((t=>{console.error(`Failed to initialize the context with '${r.name}' for ${e}`,t),d.close()})),d}_onActivateRequested(t,e){this._activateRequested.emit(e)}_onWidgetStateChanged(t,e){"confirmClosingDocument"===e.name&&this._stateChanged.emit(e)}}!function(t){t.saveHandlerProperty=new m.AttachedProperty({name:"saveHandler",create:()=>{}})}(p||(p={}))},50705:(t,e,s)=>{s.d(e,{q:()=>h});var n=s(48425),i=s(68471),a=s(55616),o=s(56769);function r(t){return o.createElement(i.Jy,{source:t.name,title:t.fullPath})}class h extends a.UB{constructor(t){super(new h.Model(t.docManager)),this.node.title=this.model.path}render(){return o.createElement(r,{fullPath:this.model.path,name:this.model.name})}}!function(t){class e extends a.I_{constructor(t){super(),this._onTitleChange=t=>{const e=this._getAllState();this._name=t.label,this._triggerChange(e,this._getAllState())},this._onPathChange=(t,e)=>{const s=this._getAllState();this._path=e,this._name=n.PathExt.basename(e),this._triggerChange(s,this._getAllState())},this._path="",this._name="",this._widget=null,this._docManager=t}get path(){return this._path}get name(){return this._name}get widget(){return this._widget}set widget(t){const e=this._widget;if(null!==e){const t=this._docManager.contextForWidget(e);t?t.pathChanged.disconnect(this._onPathChange):e.title.changed.disconnect(this._onTitleChange)}const s=this._getAllState();if(this._widget=t,null===this._widget)this._path="",this._name="";else{const t=this._docManager.contextForWidget(this._widget);t?(this._path=t.path,this._name=n.PathExt.basename(t.path),t.pathChanged.connect(this._onPathChange)):(this._path="",this._name=this._widget.title.label,this._widget.title.changed.connect(this._onTitleChange))}this._triggerChange(s,this._getAllState())}_getAllState(){return[this._path,this._name]}_triggerChange(t,e){t[0]===e[0]&&t[1]===e[1]||this.stateChanged.emit(void 0)}}t.Model=e}(h||(h={}))},49486:(t,e,s)=>{s.d(e,{N:()=>h});var n=s(68471),i=s(18168),a=s(55616),o=s(56769);function r(t){return o.createElement(n.Jy,{source:t.fileStatus})}class h extends a.UB{constructor(t){super(new h.Model(t.docManager));const e=(t.translator||i.Sr).load("jupyterlab");this._statusMap={completed:e.__("Saving completed"),started:e.__("Saving started"),failed:e.__("Saving failed")}}render(){return null===this.model||null===this.model.status?null:o.createElement(r,{fileStatus:this._statusMap[this.model.status]})}}!function(t){class e extends a.I_{constructor(t){super(),this._onStatusChange=(t,e)=>{this._status=e,"completed"===this._status?(setTimeout((()=>{this._status=null,this.stateChanged.emit(void 0)}),2e3),this.stateChanged.emit(void 0)):this.stateChanged.emit(void 0)},this._status=null,this._widget=null,this._status=null,this.widget=null,this._docManager=t}get status(){return this._status}get widget(){return this._widget}set widget(t){var e,s;const n=this._widget;if(null!==n){const t=this._docManager.contextForWidget(n);t?t.saveState.disconnect(this._onStatusChange):(null===(e=this._widget.content)||void 0===e?void 0:e.saveStateChanged)&&this._widget.content.saveStateChanged.disconnect(this._onStatusChange)}if(this._widget=t,null===this._widget)this._status=null;else{const t=this._docManager.contextForWidget(this._widget);t?t.saveState.connect(this._onStatusChange):(null===(s=this._widget.content)||void 0===s?void 0:s.saveStateChanged)&&this._widget.content.saveStateChanged.connect(this._onStatusChange)}}}t.Model=e}(h||(h={}))}}]);