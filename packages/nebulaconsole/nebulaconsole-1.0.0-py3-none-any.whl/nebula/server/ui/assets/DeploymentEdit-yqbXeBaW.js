import{d as U,x as V,b3 as w,q as x,E as M,e as R,f as g,c as u,k as e,l as p,o,u as s,b4 as S,a as k,p as D,t as a,z as t,P as c,b5 as O,F as N,b6 as z,ac as F,b7 as i,b8 as f,ae as Y,b9 as q}from"./index-tQzbzZZu.js";import{u as H}from"./usePageTitle-LpUrSePH.js";const X=c("span",null,"Enhanced deployment parameters UI improves support for lists, default values, validation, and more. Enable by updating your nebula config.",-1),j=c("span",null,"To disable the enhanced deployment parameters UI by default update your nebula config.",-1),K=U({__name:"DeploymentEdit",setup($){const y=V(),T=w(),E=x("useEnhancedDeploymentParameters",F,!1),d=M("deploymentId"),A={interval:3e5},h=R(y.deployments.getDeployment,[d.value],A),n=g(()=>h.response);async function P(m){try{await y.deployments.updateDeployment(d.value,m),i("Deployment updated","success"),f.back()}catch(l){i("Error updating deployment","error"),console.warn(l)}}async function I(m){try{await y.deployments.updateDeploymentV2(d.value,m),i("Deployment updated","success"),h.refresh(),f.push(Y.deployment(d.value))}catch(l){const r=q(l,"Error updating deployment");i(r,"error"),console.warn(l)}}function b(){f.back()}const B=g(()=>n.value?`Edit Deployment: ${n.value.name}`:"Edit Deployment");return H(B),(m,l)=>{const r=p("p-link"),_=p("p-message"),v=p("p-code"),C=p("p-content"),L=p("p-layout-default");return o(),u(L,{class:"deployment-edit"},{header:e(()=>[n.value?(o(),u(s(S),{key:0,deployment:n.value},null,8,["deployment"])):k("",!0)]),default:e(()=>[n.value?(o(),u(C,{key:0},{default:e(()=>[s(T).access.schemasV2&&!s(E)?(o(),D(N,{key:0},[a(_,{info:""},{default:e(()=>[t(" The enhanced deployment parameters UI improves support for lists, default values, validation, and more. "),c("strong",null,[t("If you're having trouble, please "),a(r,{href:"https://github.com/kozmoai/nebula/issues/new/choose"},{default:e(()=>[t("report an issue.")]),_:1})]),c("span",null,[t(" To revert to the previous deployment parameters UI click "),a(r,{href:"?useEnhancedDeploymentParameters=true",target:"_self"},{default:e(()=>[t("here")]),_:1}),t(".")])]),_:1}),a(s(O),{deployment:n.value,onCancel:b,onSubmit:I},null,8,["deployment"])],64)):(o(),D(N,{key:1},[s(E)?(o(),u(_,{key:1},{default:e(()=>[c("span",null,[t("To use the enhanced deployment parameters UI click "),a(r,{href:"?useEnhancedDeploymentParameters=false",target:"_self"},{default:e(()=>[t("here")]),_:1}),t(". ")]),j,a(v,{class:"mt-2"},{default:e(()=>[t(" nebula config NEBULA_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=False ")]),_:1})]),_:1})):(o(),u(_,{key:0},{default:e(()=>[X,a(v,{class:"mt-2"},{default:e(()=>[t(" nebula config NEBULA_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=True ")]),_:1})]),_:1})),a(s(z),{deployment:n.value,onCancel:b,onSubmit:P},null,8,["deployment"])],64))]),_:1})):k("",!0)]),_:1})}}});export{K as default};
