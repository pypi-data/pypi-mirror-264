"use strict";(self.webpackChunkstreamlit_arcgis_map=self.webpackChunkstreamlit_arcgis_map||[]).push([[904],{74e3:(e,t,n)=>{n.d(t,{aI:()=>o});n(81806),n(15941);var r=n(80963);function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],s=t[n];if(r.length!==s.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==s[e])return!1}return!0}function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1;return!0}function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return function(e,t){return e===t||null!=e&&null!=t&&(0,r.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.aI)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.aI)(e.spatialReference,t.spatialReference)&&i(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.aI)(e.spatialReference,t.spatialReference)&&i(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.aI)(e.spatialReference,t.spatialReference)&&s(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function o(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!a(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(e[s]!==t[s])return!1;return!0}(e.attributes,t.attributes)}},99784:(e,t,n)=>{n.d(t,{Ek:()=>g,HP:()=>p,JS:()=>d,Kq:()=>b,N3:()=>f,RW:()=>M,Uz:()=>Z,ao:()=>_,iQ:()=>v,jy:()=>m,w9:()=>x});var r=n(21499),s=(n(81806),n(78393)),i=n(90632),a=n(13312),o=n(42294),l=n(2413),u=n(76279),h=n(31608),c=n(44135);n(74e3);class p{constructor(e,t,n){this.uid=e,this.geometry=t,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}}function f(e){return null!=e.geometry}class m{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function d(e,t){var n,r;const s=h.g.fromJSON(e.geometryType),o=a.A.fromJSON(e.spatialReference),l=e.transform,p=e.objectIdFieldName,f=null===t||void 0===t?void 0:t.maxStringAttributeLength,m=null===t||void 0===t?void 0:t.maxStringAttributeFields;let d;const g=e.features.map((t=>{const n=function(e,t,n,r){return{uid:(0,i.c)(),objectId:r&&e.attributes?e.attributes[r]:null,attributes:e.attributes,geometry:y(e.geometry,t,n),visible:!0}}(t,s,o,e.objectIdFieldName),r=n.geometry;if(Z(n.attributes,m,f,(e=>{var t;null!==(t=d)&&void 0!==t||(d=[]);const r=M(n,p);null!=r&&d.push({objectId:r,attribute:e})})),null!=r&&l)switch(r.type){case"point":n.geometry=(0,u.Tr)(l,r,r,r.hasZ,r.hasM);break;case"multipoint":n.geometry=(0,u.SW)(l,r,r,!!r.hasZ,!!r.hasM);break;case"polygon":n.geometry=(0,u.$X)(l,r,r,!!r.hasZ,!!r.hasM);break;case"polyline":n.geometry=(0,u.P5)(l,r,r,!!r.hasZ,!!r.hasM);break;case"extent":case"mesh":n.geometry=r}return n}));return{geometryType:s,features:g,spatialReference:o,fields:null!==(n=null===(r=e.fields)||void 0===r?void 0:r.map((e=>c.A.fromJSON(e))))&&void 0!==n?n:[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:d}}function y(e,t,n){if(null==e)return null;switch(t){case"point":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:n}}case"polyline":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:n}}case"polygon":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:n}}case"multipoint":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:n}}}}function g(e){let t=32;return t+=(0,r.eY)(e.attributes),t+=3,t+=8+function(e){if(null==e)return 0;let t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":{let n=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),s="polyline"===e.type?e.paths:e.rings;for(const e of s)n+=e.length;t+=8*n*r+64,t+=128*n,t+=34,t+=32*(s.length+1);break}case"multipoint":{const n=2+(e.hasZ?1:0)+(e.hasM?1:0),r=e.points.length;t+=8*r*n+64,t+=128*r,t+=34,t+=32;break}case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=(0,s.Ek)(e.vertexAttributes.position,e.vertexAttributes.normal,e.vertexAttributes.uv,e.vertexAttributes.tangent)}return t}(e.geometry),t}function b(e){if(null==e)return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const n of e.paths)t+=n.length;return t}case"polygon":{let t=0;for(const n of e.rings)t+=n.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function _(e){if(null==e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(const t of e.paths)if(t.length>0)return!0;return!1;case"polygon":for(const t of e.rings)if(t.length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function x(e,t){switch((0,o.Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let n=0;n<e.paths.length;n++)(0,o.Jf)(t,e.paths[n],!!e.hasZ);break;case"polygon":for(let n=0;n<e.rings.length;n++)(0,o.Jf)(t,e.rings[n],!!e.hasZ);break;case"multipoint":(0,o.Jf)(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function v(e,t){switch((0,l.Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let n=0;n<e.paths.length;n++)(0,l.Jf)(t,e.paths[n]);break;case"polygon":for(let n=0;n<e.rings.length;n++)(0,l.Jf)(t,e.rings[n]);break;case"multipoint":(0,l.Jf)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function M(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function Z(e,t,n,r){if(null!==t&&void 0!==t&&t.size&&null!=n&&e)for(const s in e){if(!t.has(s))continue;const i=e[s];"string"==typeof i&&i.length>n&&(r(s),e[s]="")}}},20904:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var r=n(4212),s=n(90632),i=n(13312),a=n(86729),o=n(99784),l=n(98618),u=n(44135);function h(e,t){return t}function c(e,t,n,r){switch(n){case 0:return d(e,t+r,0);case 1:return"lowerLeft"===e.originPosition?d(e,t+r,1):function(e,t,n){let{translate:r,scale:s}=e;return r[n]-t*s[n]}(e,t+r,1)}}function p(e,t,n,r){return 2===n?d(e,t,2):c(e,t,n,r)}function f(e,t,n,r){return 2===n?d(e,t,3):c(e,t,n,r)}function m(e,t,n,r){return 3===n?d(e,t,3):p(e,t,n,r)}function d(e,t,n){let{translate:r,scale:s}=e;return r[n]+t*s[n]}class y{constructor(e){this._options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=h,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{},this._missingAttributes=[]}get missingAttributes(){return this._missingAttributes}createFeatureResult(){return new o.jy}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,a.N)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const n of e.features)t(n.geometry)}createSpatialReference(){return new i.A}addField(e,t){e.fields.push(u.A.fromJSON(t));const n=e.fields.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){const n=this._options.maxStringAttributeLength,r=this._options.maxStringAttributeFields;(0,o.Uz)(t.attributes,r,n,(n=>{const r=t.attributes[e.objectIdFieldName];null!=r&&this._missingAttributes.push({objectId:r,attribute:n})})),e.features.push(t)}addQueryGeometry(e,t){const{queryGeometry:n,queryGeometryType:r}=t,s=(0,l.Ch)(n.clone(),n,!1,!1,this._transform),i=(0,l.zv)(s,r,!1,!1);let a=null;switch(r){case"esriGeometryPoint":a="point";break;case"esriGeometryPolygon":a="polygon";break;case"esriGeometryPolyline":a="polyline";break;case"esriGeometryMultipoint":a="multipoint"}i.type=a,e.queryGeometryType=r,e.queryGeometry=i}prepareFeatures(e){var t;switch(this._transform=null!==(t=e.transform)&&void 0!==t?t:null,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"point":this.addCoordinate=(e,t,n)=>this.addCoordinatePoint(e,t,n),this.createGeometry=e=>this.createPointGeometry(e);break;case"polygon":this.addCoordinate=(e,t,n)=>this._addCoordinatePolygon(e,t,n),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"polyline":this.addCoordinate=(e,t,n)=>this._addCoordinatePolyline(e,t,n),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"multipoint":this.addCoordinate=(e,t,n)=>this._addCoordinateMultipoint(e,t,n),this.createGeometry=e=>this._createMultipointGeometry(e);break;case"mesh":case"extent":break;default:(0,r.Xb)(e.geometryType)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,new o.HP((0,s.c)(),null,new this._attributesConstructor)}allocateCoordinates(){const e=this._lengths.reduce(((e,t)=>e+t),0);this._coordinateBuffer=new Float64Array(e*this._vertexDimension),this._coordinateBufferPtr=0}addLength(e,t){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}createPointGeometry(e){const t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t}addCoordinatePoint(e,t,n){const r=this._transform?this._applyTransform(this._transform,t,n,0):t;if(null!=r)switch(n){case 0:e.x=r;break;case 1:e.y=r;break;case 2:e.hasZ?e.z=r:e.m=r;break;case 3:e.m=r}}_transformPathLikeValue(e,t){let n=0;return t<=1&&(n=this._previousCoordinate[t],this._previousCoordinate[t]+=e),this._transform?this._applyTransform(this._transform,e,t,n):e}_addCoordinatePolyline(e,t,n){this._dehydratedAddPointsCoordinate(e.paths,t,n)}_addCoordinatePolygon(e,t,n){this._dehydratedAddPointsCoordinate(e.rings,t,n)}_addCoordinateMultipoint(e,t,n){0===n&&e.points.push([]);const r=this._transformPathLikeValue(t,n);e.points[e.points.length-1].push(r)}_createPolygonGeometry(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,n){0===n&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const r=this._transformPathLikeValue(t,n),s=e[e.length-1],i=this._coordinateBuffer;if(i){if(0===n){const e=this._coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT;s.push(new Float64Array(i.buffer,e,this._vertexDimension))}i[this._coordinateBufferPtr++]=r}}_deriveApplyTransform(e){const{hasZ:t,hasM:n}=e;return t&&n?m:t?p:n?f:c}}var g=n(89122);class b{_parseFeatureQuery(e){var t;const n=new y(e.options),r=(0,g.m)(e.buffer,n),s={...r,spatialReference:null===(t=r.spatialReference)||void 0===t?void 0:t.toJSON(),fields:r.fields?r.fields.map((e=>e.toJSON())):void 0,missingAttributes:n.missingAttributes};return Promise.resolve(s)}}function _(){return new b}}}]);
//# sourceMappingURL=904.1cd6942a.chunk.js.map