"use strict";(self.webpackChunkstreamlit_arcgis_map=self.webpackChunkstreamlit_arcgis_map||[]).push([[4279],{93582:(e,t,n)=>{n.d(t,{N:()=>p,a:()=>C,b:()=>m,c:()=>v,d:()=>y,f:()=>E,g:()=>I,i:()=>R,n:()=>k,u:()=>D,w:()=>A});n(81806);var r=n(76460),o=n(15941),i=n(34761),c=n(20664),s=n(9392),u=n(43047),a=n(55855),l=n(53494),f=n(5568),d=n(95925),g=n(96190),h=n(75762);const p=y();function y(){return(0,a.vt)()}const w=u.e,b=u.e;function v(e,t){return(0,u.c)(t,e)}function m(e,t){return(0,a.fA)(e[0],e[1],e[2],t)}function A(e){return e}function C(e){return e[3]}function I(e){return e}function E(e,t,n,r){return(0,a.fA)(e,t,n,r)}function U(e,t,n){if(null==t)return!1;if(!M(e,t,T))return!1;let{t0:r,t1:o}=T;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(n){const{origin:e,direction:o}=t;n[0]=e[0]+o[0]*r,n[1]=e[1]+o[1]*r,n[2]=e[2]+o[2]*r}return!0}const T={t0:0,t1:0};function M(e,t,n){const{origin:r,direction:o}=t,i=x;i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2];const c=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===c)return!1;const s=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),u=s*s-4*c*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-e[3]*e[3]);if(u<0)return!1;const a=Math.sqrt(u);return n.t0=(-s-a)/(2*c),n.t1=(-s+a)/(2*c),!0}const x=(0,s.vt)();function R(e,t){return U(e,t,null)}function S(e,t,n){const r=h.rq.get(),o=h.Rc.get();(0,c.b)(r,t.origin,t.direction);const s=C(e);(0,c.b)(n,r,t.origin),(0,c.h)(n,n,1/(0,c.l)(n)*s);const u=O(e,t.origin),a=(0,g.g7)(t.origin,n);return(0,i.$0)(o,a+u,r),(0,c.e)(n,n,o),n}function _(e,t,n){const r=(0,c.f)(h.rq.get(),t,e),o=(0,c.h)(h.rq.get(),r,e[3]/(0,c.l)(r));return(0,c.g)(n,o,e)}function O(e,t){const n=(0,c.f)(h.rq.get(),t,e),r=(0,c.l)(n),i=C(e),s=i+Math.abs(i-r);return(0,o.XM)(i/s)}const L=(0,s.vt)();function z(e,t,n,r){const i=(0,c.f)(L,t,e);switch(n){case f._.X:{const e=(0,o.jU)(i,L)[2];return(0,c.s)(r,-Math.sin(e),Math.cos(e),0)}case f._.Y:{const e=(0,o.jU)(i,L),t=e[1],n=e[2],s=Math.sin(t);return(0,c.s)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(t))}case f._.Z:return(0,c.n)(r,i);default:return}}function P(e,t){const n=(0,c.f)(F,t,e);return(0,c.l)(n)-e[3]}function k(e,t){const n=(0,c.a)(e,t),r=C(e);return n<=r*r}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.vt)();const r=(0,c.q)(e,t),o=e[3],i=t[3];return r+i<o?((0,u.c)(n,e),n):r+o<i?((0,u.c)(n,t),n):((0,c.m)(n,e,t,(r+i-o)/(2*r)),n[3]=(r+o+i)/2,n)}const F=(0,s.vt)(),N=y();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:p,altitudeAt:P,angleToSilhouette:O,axisAt:z,clear:function(e){e[0]=e[1]=e[2]=e[3]=0},closestPoint:function(e,t,n){return U(e,t,n)?n:((0,d.oC)(t,e,n),_(e,n,n))},closestPointOnSilhouette:S,containsPoint:k,copy:v,create:y,distanceToSilhouette:function(e,t){const n=(0,c.f)(h.rq.get(),t,e),r=(0,c.p)(n),o=e[3]*e[3];return Math.sqrt(Math.abs(r-o))},elevate:function(e,t,n){return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=e[3]+t,n},equals:b,exactEquals:w,fromCenterAndRadius:m,fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},fromValues:E,getCenter:I,getRadius:C,intersectLine:function(e,t,n){const r=(0,d.Cr)(t,n);if(!M(e,r,T))return[];const{origin:o,direction:i}=r,{t0:u,t1:a}=T,f=t=>{const n=(0,s.vt)();return(0,c.r)(n,o,i,t),_(e,n,n)};return Math.abs(u-a)<(0,l.FD)()?[f(u)]:[f(u),f(a)]},intersectRay:U,intersectRayClosestSilhouette:function(e,t,n){if(U(e,t,n))return n;const r=S(e,t,h.rq.get());return(0,c.g)(n,t.origin,(0,c.h)(h.rq.get(),t.direction,(0,c.q)(t.origin,r)/(0,c.l)(t.direction))),n},intersectsRay:R,projectPoint:_,setAltitudeAt:function(e,t,n,r){const o=P(e,t),i=z(e,t,f._.Z,F),s=(0,c.h)(F,i,n-o);return(0,c.g)(r,t,s)},setExtent:function(e,t,n){return r.A.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e!==n&&v(e,n),n},tmpSphere:N,union:D,wrap:A},Symbol.toStringTag,{value:"Module"}))},97467:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(77944);class o{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,i));e++)this._items.push(this._allocator())}}const i=1024},64232:(e,t,n)=>{n.d(t,{W:()=>s,g:()=>c});var r=n(9392),o=n(9624),i=n(45308);function c(e,t,n,r){var c,s;if((0,o.canProjectWithoutEngine)(e.spatialReference,n)){var a;u[0]=e.x,u[1]=e.y;const o=e.z;return u[2]=null!==(a=null!==o&&void 0!==o?o:r)&&void 0!==a?a:0,(0,i.projectBuffer)(u,e.spatialReference,0,t,n,0,1)}const l=(0,o.tryProjectWithZConversion)(e,n);return!!l&&(t[0]=null===l||void 0===l?void 0:l.x,t[1]=null===l||void 0===l?void 0:l.y,t[2]=null!==(c=null!==(s=null===l||void 0===l?void 0:l.z)&&void 0!==s?s:r)&&void 0!==c?c:0,!0)}async function s(e,t,n,r,i){return await(0,o.initializeProjection)(e.spatialReference,n,null,i),c(e,t,n,r)}const u=(0,r.vt)()},14487:(e,t,n)=>{n.d(t,{F:()=>i});n(9624);var r=n(13312),o=n(64232);function i(e,t,n,r,i){return!(null==t||null==r||e.length<2)&&(c.x=e[0],c.y=e[1],c.z=e[2],c.spatialReference=t,(0,o.g)(c,n,r,i))}const c=(0,n(18117).T)(0,0,0,r.A.WGS84)},95925:(e,t,n)=>{n.d(t,{C:()=>l,Cr:()=>f,LV:()=>a,kb:()=>d,oC:()=>g,vt:()=>s});n(18690);var r=n(97467),o=n(20664),i=n(9392),c=n(75762);function s(e){return e?u((0,i.o8)(e.origin),(0,i.o8)(e.direction)):u((0,i.vt)(),(0,i.vt)())}function u(e,t){return{origin:e,direction:t}}function a(e,t){const n=h.get();return n.origin=e,n.direction=t,n}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s();return(0,o.c)(n.origin,e),(0,o.c)(n.direction,t),n}(e.origin,e.direction,t)}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s();return(0,o.c)(n.origin,e),(0,o.f)(n.direction,t,e),n}function d(e,t){const n=(0,o.b)(c.rq.get(),(0,o.n)(c.rq.get(),e.direction),(0,o.f)(c.rq.get(),t,e.origin));return(0,o.k)(n,n)}function g(e,t,n){const r=(0,o.k)(e.direction,(0,o.f)(n,t,e.origin));return(0,o.g)(n,e.origin,(0,o.h)(n,e.direction,r)),n}const h=new r.I((()=>s()))},18117:(e,t,n)=>{function r(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}n.d(t,{T:()=>r})},62562:(e,t,n)=>{n.d(t,{MA:()=>d,m0:()=>b,qs:()=>y,wH:()=>p});var r=n(50076),o=n(53084),i=n(76460),c=n(87041),s=n(66470);const u=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function a(e,t,n){let o="",i=0;for(;i<n;){const c=e[t+i];if(c<128)o+=String.fromCharCode(c),i++;else if(c>=192&&c<224){if(i+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const s=(31&c)<<6|63&e[t+i+1];o+=String.fromCharCode(s),i+=2}else if(c>=224&&c<240){if(i+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const s=(15&c)<<12|(63&e[t+i+1])<<6|63&e[t+i+2];o+=String.fromCharCode(s),i+=3}else{if(!(c>=240&&c<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const s=(7&c)<<18|(63&e[t+i+1])<<12|(63&e[t+i+2])<<6|63&e[t+i+3];if(s>=65536){const e=55296+(s-65536>>10),t=56320+(1023&s);o+=String.fromCharCode(e,t)}else o+=String.fromCharCode(s);i+=4}}}return o}function l(e,t){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<t.length;o++){const i=t[o],c=i.valueType||i.type,s=m[c];n.fields[i.property]=s(e,r),r+=v[c].BYTES_PER_ELEMENT}return n.byteCount=r,n}function f(e,t,n){const o=[];let i,c,s=0;for(c=0;c<e;c+=1){if(i=t[c],i>0){if(o.push(a(n,s,i-1)),0!==n[s+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);s+=i}return o}function d(e,t){return new(0,v[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function g(e,t,n){const i=null!=t.header?l(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},c={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let s=i.byteCount;for(let l=0;l<t.ordering.length;l++){var u,a;const e=t.ordering[l],n=(0,o.o8)(t[e]);if(n.count=null!==(u=i.fields.count)&&void 0!==u?u:0,"String"===n.valueType){if(n.byteOffset=s,n.byteCount=i.fields[e+"ByteCount"],"UTF-8"!==n.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:n.encoding});if(n.timeEncoding&&"ECMA_ISO8601"!==n.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:n.timeEncoding})}else{if(!A(n.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:n.valueType});{const e=C(n.valueType);s+=s%e!=0?e-s%e:0,n.byteOffset=s,n.byteCount=e*n.valuesPerElement*n.count}}s+=null!==(a=n.byteCount)&&void 0!==a?a:0,c.entries[e]=n}return c.byteCount=s-c.byteOffset,c}function h(e,t,n){if(t!==e&&u().error("Invalid ".concat(n," buffer size\n expected: ").concat(e,", actual: ").concat(t,")")),t<e)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e,t){const n=l(e,t&&t.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,c=null!=i.vertexCount?i.vertexCount:i.count;for(const a of t.ordering){if(!t.vertexAttributes[a])continue;const e={...t.vertexAttributes[a],byteOffset:r,count:c},n=w[a]||"_"+a;o.vertexAttributes[n]=e,r+=C(e.valueType)*e.valuesPerElement*c}const s=i.faceCount;if(t.faces&&s){o.faces={};for(const e of t.ordering){if(!t.faces[e])continue;const n={...t.faces[e],byteOffset:r,count:s};o.faces[e]=n,r+=C(n.valueType)*n.valuesPerElement*s}}const u=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&u){o.featureAttributes={};for(const e of t.featureAttributeOrder){if(!t.featureAttributes[e])continue;const n={...t.featureAttributes[e],byteOffset:r,count:u};o.featureAttributes[e]=n,r+=("UInt64"===n.valueType?8:C(n.valueType))*n.valuesPerElement*u}}return h(r,e.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}function y(e,t){return e&&e.compressedAttributes&&"draco"===e.compressedAttributes.encoding?function(e){const t={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const n of e)switch(n){case"position":break;case"normal":t.normal=!0;break;case"uv0":t.uv0=!0;break;case"color":t.color=!0;break;case"uv-region":t.uvRegion=!0;break;case"feature-index":t.featureIndex=!0}return t}(e.compressedAttributes.attributes):e?function(e){return{isDraco:!1,isLegacy:!1,color:null!=e.color,normal:null!=e.normal,uv0:null!=e.uv0,uvRegion:null!=e.uvRegion,featureIndex:null!=e.faceRange&&null!=e.featureId}}(e):function(e){const t={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const n of e.ordering)if(e.vertexAttributes[n])switch(n){case"position":break;case"normal":t.normal=!0;break;case"color":t.color=!0;break;case"uv0":t.uv0=!0;break;case"region":t.uvRegion=!0}return e.featureAttributes&&e.featureAttributeOrder&&(t.featureIndex=!0),t}(t)}const w={position:s.r.POSITION,normal:s.r.NORMAL,color:s.r.COLOR,uv0:s.r.UV0,region:s.r.UVREGION};function b(e,t,n){if("lepcc-rgb"===e.encoding)return(0,c.mb)(t);if("lepcc-intensity"===e.encoding)return(0,c.Ax)(t);if(null!=e.encoding&&""!==e.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(u().warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(u().warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");const o=g(t,e,n);h(o.byteOffset+o.byteCount,t.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const e=o.entries.attributeByteCounts,n=d(t,e),r=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,i);return i.timeEncoding?function(e,t,n){return f(e,t,n).map((e=>{const t=e?Date.parse(e):null;return t&&!Number.isNaN(t)?t:null}))}(e.count,n,r):f(e.count,n,r)}return d(t,i)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const v={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},m={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function A(e){return v.hasOwnProperty(e)}function C(e){return A(e)?v[e].BYTES_PER_ELEMENT:0}},11486:(e,t,n)=>{n(13191),n(9392),n(34111),n(90707)},74279:(e,t,n)=>{n.d(t,{Dd:()=>I,II:()=>h,JA:()=>p,Q7:()=>T,Rm:()=>C,aM:()=>w,b$:()=>E,hB:()=>U,s1:()=>b});n(35238);var r=n(3825),o=(n(18690),n(50076)),i=(n(81806),n(78393)),c=(n(34761),n(13191)),s=(n(20664),n(9392)),u=(n(9624),n(98510),n(14487),n(2413)),a=(n(93582),n(97015),n(62562)),l=(n(11486),n(7342)),f=(n(51990),n(59231)),d=n(13312);function g(e){return e?parseInt(e.substring(e.lastIndexOf("/")+1,e.length),10):void 0}function h(e,t,n,r){n.traverse(t,(t=>{const n=t.serviceMbsInIndexSR;return(null!=n&&w(e,n))!==p.OUTSIDE&&(r(t),!0)}))}(0,u.vt)();var p,y;function w(e,t){const n=t[0],r=t[1],o=t[3],i=e[0]-n,c=n-e[2],s=e[1]-r,u=r-e[3],a=Math.max(i,c,0),l=Math.max(s,u,0),f=a*a+l*l;return f>o*o?p.OUTSIDE:f>0?p.INTERSECTS_CENTER_OUTSIDE:-Math.max(i,c,s,u)>o?p.INSIDE:p.INTERSECTS_CENTER_INSIDE}async function b(e,t,n,o,i,c,s,u){const l=[];for(const r of t)if(r&&i.includes(r.name)){const t="".concat(e,"/nodes/").concat(n,"/attributes/").concat(r.key,"/0");l.push({url:t,storageInfo:r})}const f=await Promise.allSettled(l.map((e=>(0,r.A)(e.url,{responseType:"array-buffer",query:{...s,token:c},signal:null===u||void 0===u?void 0:u.signal}).then((t=>(0,a.m0)(e.storageInfo,t.data)))))),d=[];for(const r of o){const e={};for(let t=0;t<f.length;t++){const n=f[t];if("fulfilled"===n.status){const o=n.value;e[l[t].storageInfo.name]=A(o,r)}}d.push(e)}return d}(y=p||(p={}))[y.OUTSIDE=0]="OUTSIDE",y[y.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",y[y.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",y[y.INSIDE=3]="INSIDE";const v=-32768,m=-(2**31);function A(e,t){if(!e)return null;const n=e[t];return(0,i.IY)(e)?n===v?null:n:(0,i._G)(e)?n===m?null:n:n!=n?null:n}function C(e){const t=e.store,n=t.indexCRS||t.geographicCRS,r=void 0===n?t.indexWKT:void 0;if(r){if(!e.spatialReference)throw new o.A("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indexWKT in the scene layer store but no layer spatial reference",{});if(r!==e.spatialReference.wkt)throw new o.A("layerview:store-spatial-reference-wkt-index-incompatible","The indexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=n?new d.A(g(n)):e.spatialReference;return i.equals(e.spatialReference)?e.spatialReference:i}function I(e){const t=e.store,n=t.vertexCRS||t.projectedCRS,r=void 0===n?t.vertexWKT:void 0;if(r){if(!e.spatialReference)throw new o.A("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(r!==e.spatialReference.wkt)throw new o.A("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=n?new d.A(g(n)):e.spatialReference;return i.equals(e.spatialReference)?e.spatialReference:i}(0,l.CC)({color:[0,0,0,0],opacity:0});function E(e,t){return(0|e)+(0|t)|0}function U(e){return e[3]>=0}function T(e){null!=e&&(e[3]=-1)}(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,u.vt)(),(0,u.vt)(),new f.ab,(0,s.vt)(),new Array(72),(0,c.vt)()},87041:(e,t,n)=>{n.d(t,{Ax:()=>w,Me:()=>a,mb:()=>h});var r=n(50076);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function c(e,t,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,n+i.identifierOffset,i.identifierLength)),version:t.getUint16(n+i.versionOffset,o),checksum:t.getUint32(n+i.checksumOffset,o)}}const s={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function u(e,t){return{sizeLo:e.getUint32(t+s.sizeLo,o),sizeHi:e.getUint32(t+s.sizeHi,o),minX:e.getFloat64(t+s.minX,o),minY:e.getFloat64(t+s.minY,o),minZ:e.getFloat64(t+s.minZ,o),maxX:e.getFloat64(t+s.maxX,o),maxY:e.getFloat64(t+s.maxY,o),maxZ:e.getFloat64(t+s.maxZ,o),errorX:e.getFloat64(t+s.errorX,o),errorY:e.getFloat64(t+s.errorY,o),errorZ:e.getFloat64(t+s.errorZ,o),count:e.getUint32(t+s.count,o),reserved:e.getUint32(t+s.reserved,o)}}function a(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:a}=c(e,t,n);if(n+=i.byteCount,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const f=u(t,n);if(n+=s.byteCount,f.sizeHi*2**32+f.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const d=new Float64Array(3*f.count),g=[],h=[],p=[],y=[];if(n=l(e,n,g),n=l(e,n,h),n=l(e,n,p),n=l(e,n,y),n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad length");let w=0,b=0;for(let r=0;r<g.length;r++){b+=g[r];let e=0;for(let t=0;t<h[r];t++){e+=p[w];const t=y[w];d[3*w]=Math.min(f.maxX,f.minX+2*f.errorX*e),d[3*w+1]=Math.min(f.maxY,f.minY+2*f.errorY*b),d[3*w+2]=Math.min(f.maxZ,f.minZ+2*f.errorZ*t),w++}}return{errorX:f.errorX,errorY:f.errorY,errorZ:f.errorZ,result:d}}function l(e,t,n){const r=[];t=f(e,t,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,t=f(e,t,o);for(let e=0;e<o.length;e++)n.push(o[e]+r[i])}return t}function f(e,t,n){const i=new DataView(e,t),c=i.getUint8(0),s=31&c,u=!!(32&c),a=(192&c)>>6;let l=0;if(0===a)l=i.getUint32(1,o),t+=5;else if(1===a)l=i.getUint16(1,o),t+=3;else{if(2!==a)throw new r.A("lepcc-decode-error","Bad count type");l=i.getUint8(1),t+=2}if(u)throw new r.A("lepcc-decode-error","LUT not implemented");const f=Math.ceil(l*s/8),d=new Uint8Array(e,t,f);let g=0,h=0,p=0;const y=-1>>>32-s;for(let r=0;r<l;r++){for(;h<s;)g|=d[p]<<h,h+=8,p+=1;n[r]=g&y,g>>>=s,h-=s,h+s>32&&(g|=d[p-1]>>8-h)}return t+p}const d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function g(e,t){return{sizeLo:e.getUint32(t+d.sizeLo,o),sizeHi:e.getUint32(t+d.sizeHi,o),count:e.getUint32(t+d.count,o),colorMapCount:e.getUint16(t+d.colorMapCount,o),lookupMethod:e.getUint8(t+d.lookupMethod),compressionMethod:e.getUint8(t+d.compressionMethod)}}function h(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:s}=c(e,t,n);if(n+=i.byteCount,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(s>1)throw new r.A("lepcc-decode-error","Unknown version");const u=g(t,n);if(n+=d.byteCount,u.sizeHi*2**32+u.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+n!==e.byteLength||u.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const t=new Uint8Array(e,n,3*u.colorMapCount),o=new Uint8Array(e,n+3*u.colorMapCount,u.count),i=new Uint8Array(3*u.count);for(let e=0;e<u.count;e++){const n=o[e];i[3*e]=t[3*n],i[3*e+1]=t[3*n+1],i[3*e+2]=t[3*n+2]}return i}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+n!==e.byteLength||0!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(n+3!==e.byteLength||1!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=t.getUint8(n),i=t.getUint8(n+1),c=t.getUint8(n+2),s=new Uint8Array(3*u.count);for(let e=0;e<u.count;e++)s[3*e]=o,s[3*e+1]=i,s[3*e+2]=c;return s}throw new r.A("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)}const p={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function y(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,o),sizeHi:e.getUint32(t+p.sizeHi,o),count:e.getUint32(t+p.count,o),scaleFactor:e.getUint16(t+p.scaleFactor,o),bitsPerPoint:e.getUint8(t+p.bitsPerPoint),reserved:e.getUint8(t+p.reserved)}}function w(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:s}=c(e,t,n);if(n+=i.byteCount,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(s>1)throw new r.A("lepcc-decode-error","Unknown version");const u=y(t,n);if(n+=p.byteCount,u.sizeHi*2**32+u.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const a=new Uint16Array(u.count);if(8===u.bitsPerPoint){if(u.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint8Array(e,n,u.count);for(let e=0;e<u.count;e++)a[e]=t[e]*u.scaleFactor}else if(16===u.bitsPerPoint){if(2*u.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint16Array(e,n,u.count);for(let e=0;e<u.count;e++)a[e]=t[e]*u.scaleFactor}else{const t=[];if(f(e,n,t)!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let e=0;e<u.count;e++)a[e]=t[e]*u.scaleFactor}return a}},7342:(e,t,n)=>{n.d(t,{Cc:()=>u,CC:()=>a,RF:()=>s});var r=n(69539),o=(n(81806),n(76931)),i=n(55855);var c=n(46702);function s(e){return e&&e.enabled&&(function(e){return"extrude"===e.type}(e)||function(e){return"fill"===e.type}(e))&&null!=e.edges}function u(e,t){return function(e,t){if(null==e)return null;const n=null!=e.color?(0,i.ci)(r.A.toUnitRGBA(e.color)):(0,i.fA)(0,0,0,0),c=(0,o.Lz)(e.size),s=(0,o.Lz)(e.extensionLength);switch(e.type){case"solid":return a({color:n,size:c,extensionLength:s,...t});case"sketch":return function(e){return{...f,...e,type:"sketch"}}({color:n,size:c,extensionLength:s,...t});default:return}}(function(e){return e&&e.enabled&&e.edges||null}(e),t)}function a(e){return{...l,...e,type:"solid"}}const l={color:(0,i.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:c.x.OPAQUE,hasSlicePlane:!1},f={color:(0,i.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:c.x.OPAQUE,hasSlicePlane:!1}},51990:(e,t,n)=>{n.d(t,{Eb:()=>i,_j:()=>c,k5:()=>r});var r,o=n(15941);function i(e){switch(e){case"multiply":default:return r.Multiply;case"ignore":return r.Ignore;case"replace":return r.Replace;case"tint":return r.Tint}}function c(e,t,n){if(null==e||t===r.Ignore)return n[0]=255,n[1]=255,n[2]=255,void(n[3]=255);const i=(0,o.qE)(Math.round(e[3]*u),0,u),c=0===i||t===r.Tint?0:t===r.Replace?a:l;n[0]=(0,o.qE)(Math.round(e[0]*s),0,s),n[1]=(0,o.qE)(Math.round(e[1]*s),0,s),n[2]=(0,o.qE)(Math.round(e[2]*s),0,s),n[3]=i+c}!function(e){e[e.Multiply=1]="Multiply",e[e.Ignore=2]="Ignore",e[e.Replace=3]="Replace",e[e.Tint=4]="Tint"}(r||(r={}));const s=255,u=85,a=u,l=2*u},46702:(e,t,n)=>{var r;n.d(t,{x:()=>r}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OPAQUE=2]="OPAQUE"}(r||(r={}))}}]);
//# sourceMappingURL=4279.bea8ac55.chunk.js.map