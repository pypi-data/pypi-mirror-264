"use strict";(self.webpackChunkinsteon_frontend_home_assistant=self.webpackChunkinsteon_frontend_home_assistant||[]).push([[7222],{7222:function(i,n,e){e.r(n),e.d(n,{DialogAddApplicationCredential:function(){return H}});var t,a,s,o,r,l,c,d,h,p,u,_=e(99312),m=e(81043),f=e(33368),v=e(71650),g=e(82390),k=e(69205),y=e(70906),b=e(91808),Z=e(88962),x=(e(22859),e(97393),e(46349),e(70320),e(65974),e(30437),e(44577),e(9644)),w=e(66221),z=e(18394),S=(e(23860),e(7006),e(16591),e(9828)),D=(e(75504),e(51520),function(){var i=(0,m.Z)((0,_.Z)().mark((function i(n){return(0,_.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",n.callWS({type:"application_credentials/config"}));case 1:case"end":return i.stop()}}),i)})));return function(n){return i.apply(this,arguments)}}()),C=function(){var i=(0,m.Z)((0,_.Z)().mark((function i(n,e,t,a,s){return(0,_.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",n.callWS({type:"application_credentials/create",domain:e,client_id:t,client_secret:a,name:s}));case 1:case"end":return i.stop()}}),i)})));return function(n,e,t,a,s){return i.apply(this,arguments)}}(),A=e(64346),B=e(29950),V=e(84728),I="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",q=function(i){return(0,x.dy)(t||(t=(0,Z.Z)(["<mwc-list-item>\n    <span>","</span>\n  </mwc-list-item>"])),i.name)},H=(0,b.Z)([(0,w.Mo)("dialog-add-application-credential")],(function(i,n){var e,t,b,H=function(n){(0,k.Z)(t,n);var e=(0,y.Z)(t);function t(){var n;(0,v.Z)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,[this].concat(s)),i((0,g.Z)(n)),n}return(0,f.Z)(t)}(n);return{F:H,d:[{kind:"field",decorators:[(0,w.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_loading",value:function(){return!1}},{kind:"field",decorators:[(0,w.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_domain",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_manifest",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_name",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_description",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_clientId",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_clientSecret",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_domains",value:void 0},{kind:"field",decorators:[(0,w.SB)()],key:"_config",value:void 0},{kind:"method",key:"showDialog",value:function(i){this._params=i,this._domain=i.selectedDomain,this._manifest=i.manifest,this._name="",this._description="",this._clientId="",this._clientSecret="",this._error=void 0,this._loading=!1,this._fetchConfig()}},{kind:"method",key:"_fetchConfig",value:(b=(0,m.Z)((0,_.Z)().mark((function i(){var n=this;return(0,_.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,D(this.hass);case 2:return this._config=i.sent,this._domains=Object.keys(this._config.integrations).map((function(i){return{id:i,name:(0,A.Lh)(n.hass.localize,i)}})),i.next=6,this.hass.loadBackendTranslation("application_credentials");case 6:this._updateDescription();case 7:case"end":return i.stop()}}),i,this)}))),function(){return b.apply(this,arguments)})},{kind:"method",key:"render",value:function(){var i,n;if(!this._params||!this._domains)return x.Ld;var e=this._params.selectedDomain?(0,A.Lh)(this.hass.localize,this._domain):"";return(0,x.dy)(a||(a=(0,Z.Z)(["\n      <ha-dialog\n        open\n        @closed=","\n        scrimClickAction\n        escapeKeyAction\n        .heading=","\n      >\n        <div>\n          ","\n          ","\n          ","\n          ","\n          ",'\n          <ha-textfield\n            class="name"\n            name="name"\n            .label=',"\n            .value=","\n            required\n            @input=","\n            .validationMessage=",'\n            dialogInitialFocus\n          ></ha-textfield>\n          <ha-textfield\n            class="clientId"\n            name="clientId"\n            .label=',"\n            .value=","\n            required\n            @input=","\n            .validationMessage=","\n            dialogInitialFocus\n            .helper=","\n            helperPersistent\n          ></ha-textfield>\n          <ha-textfield\n            .label=",'\n            type="password"\n            name="clientSecret"\n            .value=',"\n            required\n            @input=","\n            .validationMessage=","\n            .helper=","\n            helperPersistent\n          ></ha-textfield>\n        </div>\n        ","\n      </ha-dialog>\n    "])),this._abortDialog,(0,S.i)(this.hass,this.hass.localize("ui.panel.config.application_credentials.editor.caption")),this._error?(0,x.dy)(s||(s=(0,Z.Z)(['<ha-alert alert-type="error">',"</ha-alert> "])),this._error):"",this._params.selectedDomain&&!this._description?(0,x.dy)(o||(o=(0,Z.Z)(["<p>\n                ","\n                ","\n              </p>"])),this.hass.localize("ui.panel.config.application_credentials.editor.missing_credentials",{integration:e}),null!==(i=this._manifest)&&void 0!==i&&i.is_built_in||null!==(n=this._manifest)&&void 0!==n&&n.documentation?(0,x.dy)(r||(r=(0,Z.Z)(["<a\n                      href=",'\n                      target="_blank"\n                      rel="noreferrer"\n                    >\n                      ',"\n                      <ha-svg-icon .path=","></ha-svg-icon>\n                    </a>"])),this._manifest.is_built_in?(0,V.R)(this.hass,"/integrations/".concat(this._domain)):this._manifest.documentation,this.hass.localize("ui.panel.config.application_credentials.editor.missing_credentials_domain_link",{integration:e}),I):""):"",this._params.selectedDomain&&this._description?"":(0,x.dy)(l||(l=(0,Z.Z)(["<p>\n                ","\n                <a\n                  href=",'\n                  target="_blank"\n                  rel="noreferrer"\n                >\n                  ',"\n                  <ha-svg-icon .path=","></ha-svg-icon>\n                </a>\n              </p>"])),this.hass.localize("ui.panel.config.application_credentials.editor.description"),(0,V.R)(this.hass,"/integrations/application_credentials"),this.hass.localize("ui.panel.config.application_credentials.editor.view_documentation"),I),this._params.selectedDomain?"":(0,x.dy)(c||(c=(0,Z.Z)(['<ha-combo-box\n                name="domain"\n                .hass=',"\n                .label=","\n                .value=","\n                .renderer=","\n                .items=",'\n                item-id-path="id"\n                item-value-path="id"\n                item-label-path="name"\n                required\n                @value-changed=',"\n              ></ha-combo-box>"])),this.hass,this.hass.localize("ui.panel.config.application_credentials.editor.domain"),this._domain,q,this._domains,this._handleDomainPicked),this._description?(0,x.dy)(d||(d=(0,Z.Z)(["<ha-markdown\n                breaks\n                .content=","\n              ></ha-markdown>"])),this._description):"",this.hass.localize("ui.panel.config.application_credentials.editor.name"),this._name,this._handleValueChanged,this.hass.localize("ui.common.error_required"),this.hass.localize("ui.panel.config.application_credentials.editor.client_id"),this._clientId,this._handleValueChanged,this.hass.localize("ui.common.error_required"),this.hass.localize("ui.panel.config.application_credentials.editor.client_id_helper"),this.hass.localize("ui.panel.config.application_credentials.editor.client_secret"),this._clientSecret,this._handleValueChanged,this.hass.localize("ui.common.error_required"),this.hass.localize("ui.panel.config.application_credentials.editor.client_secret_helper"),this._loading?(0,x.dy)(h||(h=(0,Z.Z)(['\n              <div slot="primaryAction" class="submit-spinner">\n                <ha-circular-progress indeterminate></ha-circular-progress>\n              </div>\n            ']))):(0,x.dy)(p||(p=(0,Z.Z)(['\n              <mwc-button slot="primaryAction" @click=',">\n                ",'\n              </mwc-button>\n              <mwc-button\n                slot="primaryAction"\n                .disabled=',"\n                @click=","\n              >\n                ","\n              </mwc-button>\n            "])),this._abortDialog,this.hass.localize("ui.common.cancel"),!this._domain||!this._clientId||!this._clientSecret,this._addApplicationCredential,this.hass.localize("ui.panel.config.application_credentials.editor.add")))}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._domains=void 0,(0,z.B)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"_handleDomainPicked",value:function(i){i.stopPropagation(),this._domain=i.detail.value,this._updateDescription()}},{kind:"method",key:"_updateDescription",value:(t=(0,m.Z)((0,_.Z)().mark((function i(){var n;return(0,_.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this._domain){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,this.hass.loadBackendTranslation("application_credentials",this._domain);case 4:n=this._config.integrations[this._domain],this._description=this.hass.localize("component.".concat(this._domain,".application_credentials.description"),n.description_placeholders);case 6:case"end":return i.stop()}}),i,this)}))),function(){return t.apply(this,arguments)})},{kind:"method",key:"_handleValueChanged",value:function(i){this._error=void 0;var n=i.target.name,e=i.target.value;this["_".concat(n)]=e}},{kind:"method",key:"_abortDialog",value:function(){this._params&&this._params.dialogAbortedCallback&&this._params.dialogAbortedCallback(),this.closeDialog()}},{kind:"method",key:"_addApplicationCredential",value:(e=(0,m.Z)((0,_.Z)().mark((function i(n){var e;return(0,_.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.preventDefault(),this._domain&&this._clientId&&this._clientSecret){i.next=3;break}return i.abrupt("return");case 3:return this._loading=!0,this._error="",i.prev=5,i.next=8,C(this.hass,this._domain,this._clientId,this._clientSecret,this._name);case 8:e=i.sent,i.next=16;break;case 11:return i.prev=11,i.t0=i.catch(5),this._loading=!1,this._error=i.t0.message,i.abrupt("return");case 16:this._params.applicationCredentialAddedCallback(e),this.closeDialog();case 18:case"end":return i.stop()}}),i,this,[[5,11]])}))),function(i){return e.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[B.yu,(0,x.iv)(u||(u=(0,Z.Z)(["\n        ha-dialog {\n          --mdc-dialog-max-width: 500px;\n          --dialog-z-index: 10;\n        }\n        .row {\n          display: flex;\n          padding: 8px 0;\n        }\n        ha-combo-box {\n          display: block;\n          margin-bottom: 24px;\n        }\n        ha-textfield {\n          display: block;\n          margin-bottom: 24px;\n        }\n        a {\n          text-decoration: none;\n        }\n        a ha-svg-icon {\n          --mdc-icon-size: 16px;\n        }\n        ha-markdown {\n          margin-bottom: 16px;\n        }\n      "])))]}}]}}),x.oi)}}]);
//# sourceMappingURL=459f7d9f.js.map