import"../chunks/disclose-version.Bg9kRutz.js";import{a as ft,e as N,r as F,p as _t,g as e,f as I,b as n,d as lt,h as R,u as yt,s as vt}from"../chunks/runtime.Qq3DoWX7.js";import{q as pt,u as wt,f as A,s as T,n as p,v as a,g as J,a as z,i as rt,k as bt,c as B,t as ct,d as xt,e as V,b as D,w as ot,x as K,o as kt}from"../chunks/render.DzT6dLEH.js";import{e as Q}from"../chunks/load.Dqk50Fxl.js";import{N as Mt,l as Pt,h as St}from"../chunks/data.gYHznFCy.js";async function Bt(){const k=document.getElementById("chart"),d=new XMLSerializer().serializeToString(k);await navigator.clipboard.writeText(d),window.alert("SVG text copied to clipboard")}var zt=ot('<rect stroke="black"><title> </title></rect>'),Vt=ot("<text> </text>"),Dt=ot("<text> </text>"),Ot=xt('<div class="relative h-[calc(100vh-44px)] w-auto text-blue-700"><svg id="chart" version="1.1" class="block h-full m-auto"><rect fill="white"></rect><!><!><!></svg> <button class="absolute m-2 top-0 right-0" title="Copy SVG text to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div>');function Ct(k,d){ft(d,!0);const f=N(d,"margin",3,2),O=N(d,"labelPadding",3,1.5),C=N(d,"fontSize",3,2),Y=N(d,"transpose",3,!0),U=N(d,"color",3,"rgb(29, 78, 216)");function M(r){const s=new Set,x=new Set,t=new Map;for(let{x:_,y,v:u}of r){if(Y()){const i=y;y=_,_=i}s.add(_),x.add(y),t.set(_+" /// "+y,u)}const g=[...s].toSorted(),l=[...x].toSorted(),o=Math.min(...t.values())-1e-5,c=Math.max(...t.values());return{xs:g,ys:l,values:t,v_min:o,v_max:c}}const v=lt(()=>M(d.data));let P=I(0),m=I(0),h=I(10),S=I(10);function dt(r){let s=0,x=0,t=10,g=10;for(const l of r.children){const{x:o,y:c,width:_,height:y}=l.getBBox();let u=DOMPoint.fromPoint({x:o,y:c}),i=DOMPoint.fromPoint({x:o+_,y:c+y}),w=DOMPoint.fromPoint({x:o+_,y:c}),b=DOMPoint.fromPoint({x:o,y:c+y});for(const at of l.transform.baseVal){const{a:j,b:G,c:X,d:L,e:ut,f:ht}=at.matrix,E=new DOMMatrixReadOnly([j,G,X,L,ut,ht]);u=E.transformPoint(u),i=E.transformPoint(i),w=E.transformPoint(w),b=E.transformPoint(b)}s=Math.min(s,u.x,i.x,w.x,b.x),x=Math.min(x,u.y,i.y,w.y,b.y),t=Math.max(t,u.x,i.x,w.x,b.x),g=Math.max(g,u.y,i.y,w.y,b.y)}R(P,K(s)),R(m,K(x)),R(h,K(t)),R(S,K(g))}var it=J(k,!0,Ot),q=z(it),H=z(q),nt=T(H),st=T(nt),mt=T(st),gt=T(T(q,!0)),W,Z,$,tt,et;F(()=>{W!==(W=`${p(e(P)-f())} ${p(e(m)-f())} ${p(e(h)-e(P)+2*f())} ${p(e(S)-e(m)+2*f())}`)&&a(q,"viewBox",W),Z!==(Z=e(P)-f())&&a(H,"x",Z),$!==($=e(m)-f())&&a(H,"y",$),tt!==(tt=e(h)-e(P)+f()+f())&&a(H,"width",tt),et!==(et=e(S)-e(m)+f()+f())&&a(H,"height",et)}),wt(q,r=>dt(r)),Q(nt,()=>e(v).xs,71,(r,s)=>n(r),(r,s,x)=>{var t=V(r),g=D(t);Q(g,()=>e(v).ys,71,(l,o)=>n(l),(l,o,c)=>{var _=V(l),y=D(_);rt(y,()=>e(v).values.get(n(s)+" /// "+n(o))!==void 0,u=>{var i=J(u,!0,zt);const w=lt(()=>(e(v).values.get(n(s)+" /// "+n(o))-e(v).v_min)/(e(v).v_max-e(v).v_min));a(i,"width",9),a(i,"height",9),a(i,"rc",1),a(i,"ry",1),a(i,"stroke-width",.05);var b=z(i),at=z(b);bt(at,()=>`v=${p(e(v).values.get(n(s)+" /// "+n(o)))} x=${p(n(s))} y=${p(n(o))}`);var j,G,X,L;F(()=>{j!==(j=n(x)*10)&&a(i,"x",j),G!==(G=n(c)*10)&&a(i,"y",G),X!==(X=U())&&a(i,"fill",X),L!==(L=e(w))&&a(i,"fill-opacity",L)}),A(u,i)},null),B(l,_)},null),B(r,t)},null),Q(st,()=>e(v).xs,71,(r,s)=>n(r),(r,s,x)=>{var t=J(r,!0,Vt),g=z(t),l,o,c,_;F(()=>{l!==(l=n(x)*10+4.5)&&a(t,"x",l),o!==(o=-O())&&a(t,"y",o),c!==(c=C())&&a(t,"font-size",c),_!==(_=`rotate(-30, ${p(n(x)*10+4.5)}, ${p(-O())})`)&&a(t,"transform",_),ct(g,n(s))}),A(r,t)},null),Q(mt,()=>e(v).ys,71,(r,s)=>n(r),(r,s,x)=>{var t=J(r,!0,Dt),g=z(t),l,o,c;F(()=>{l!==(l=e(v).xs.length*10+O())&&a(t,"x",l),o!==(o=n(x)*10+5)&&a(t,"y",o),c!==(c=C())&&a(t,"font-size",c),ct(g,n(s))}),A(r,t)},null),gt.__click=[Bt],A(k,it),_t()}pt(["click"]);var Ht=xt("Loading..",!0);function Tt(k,d){ft(d,!1);const f={};yt(f);const O=()=>vt(Pt,"$loading",f),C=()=>vt(St,"$heatmap",f);var Y=V(k),U=D(Y);rt(U,O,M=>{var v=kt(M,!0,Ht);B(M,v)},M=>{var v=V(M),P=D(v);rt(P,()=>C().length===0,m=>{var h=V(m),S=D(h);Mt(S,{}),B(m,h)},m=>{var h=V(m),S=D(h);Ct(S,{get data(){return C()}}),B(m,h)}),B(M,v)}),B(k,Y),_t()}export{Tt as component};
