import{_ as ae,a as ne,b as se}from"./add-button.AZUXsb9H.js";import{G as I,x as ie,r as D,X as g,y as re,z as w,A as L,w as a,B as de,o as p,b as l,C as d,Y as ue,d as o,E as ce,a as e,c as _,D as k,F as C,t as b}from"./entry.3Ks4xMS2.js";import{r as $,a as B,u as pe,g as me,c as j,h as _e,s as he}from"./artifact-validation.9XnuPCXh.js";const fe=I();async function ve(G,x,S){return await $fetch(fe.public.apiPath+"/model/"+G+"/version/"+x+"/artifact/"+S,{retry:0,method:"GET",onRequestError(){$()},onResponse({response:T}){return T._data},onResponseError(){B()}})}const be=e("h1",{class:"section-header"},"MLTE REPORT",-1),Ve=e("br",null,null,-1),ye=e("h2",{class:"section-header"},"Model Summary",-1),ge=e("p",null,"A summary of the model under evaluation.",-1),Ue=e("h2",{class:"section-header"},"Performance",-1),ke=e("p",null,"Model performance evaluation.",-1),Ce={class:"input-group"},Ae=e("h3",null,"Goals",-1),qe=e("p",null,"Goals or objectives that the model is going to help satisfy.",-1),De=e("h3",{class:"no-margin-section-header"},"Metrics",-1),we={class:"inline-input-left"},xe=e("br",null,null,-1),Se=e("br",null,null,-1),Ee={class:"inline-input-right"},Re=e("br",null,null,-1),Pe=e("br",null,null,-1),Te=e("br",null,null,-1),Fe={class:"inline-button"},Me=e("hr",null,null,-1),$e=e("h3",null,"MLTE Evaluation",-1),Be={class:"table usa-table usa-table--borderless"},Ge=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Evidence ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),Ne={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},Oe={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},Le={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},je={key:3},Ie=e("h2",{class:"section-header"},"Intended Use",-1),He=e("p",null,"A description of how the model is intended to be used.",-1),Je={class:"input-group",style:{"margin-top":"1em"}},Xe=e("h3",null,"Production Compute Resources",-1),ze=e("p",null," Describe the hardware and software requirements including amount of compute resources needed for inference. ",-1),Qe={class:"inline-input-left"},Ye={class:"inline-input-right"},Ke={class:"inline-input-left"},We={class:"inline-input-right"},Ze=e("h2",{class:"section-header"},"Risks",-1),et=e("h2",{class:"section-header"},"Data",-1),tt=e("p",null,"A description of the data used to train the model.",-1),ot=e("h2",{class:"section-header"},"Data",-1),lt=e("p",null," Details of the data that will influence development efforts; fill out all that are known. For access / availability, record what needs to happen to access the data, such as accounts that need to be created or methods for data transportation. ",-1),at={class:"input-group"},nt={class:"inline-input-left"},st={class:"inline-input-right"},it={class:"input-group",style:{"margin-top":"1em"}},rt={class:"inline-input-left"},dt={class:"inline-input-right"},ut={class:"inline-button"},ct={class:"input-group",style:{"margin-top":"1em"}},pt={class:"no-margin-section-header"},mt={class:"inline-input-left"},_t={class:"inline-input-right"},ht={class:"inline-input-left"},ft={class:"inline-input-right"},vt={class:"inline-input-left"},bt={class:"inline-input-right"},Vt=e("hr",null,null,-1),yt=e("hr",null,null,-1),gt=e("h3",null,"Comments",-1),Ut=e("p",null,"Free-form comments from model developers and system integrators.",-1),kt=e("h3",null,"Quantitative Analysis",-1),Ct=e("p",null,"No quantitative analysis included with this report.",-1),At={style:{"text-align":"right","margin-top":"1em"}},xt=ie({__name:"report",async setup(G){let x,S;const P=I(),T=D([{href:"/",text:"Artifact Store"},{href:"/here",text:"Report"}]),E=D(""),N=D(g().query.artifactId!==void 0),O=D(null),i=D({artifact_type:"report",summary:{problem_type:"classification",task:""},performance:{goals:[{description:"",metrics:[{description:"",baseline:""}]}],validated_spec_id:null},intended_use:{usage_context:"",production_requirements:{integration:"",interface:{input:{description:""},output:{description:""}},resources:{cpu:"",gpu:"",memory:"",storage:""}}},risks:{fp:"",fn:"",other:""},data:[{access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""}],comments:[{content:""}],quantitative_analysis:{}}),F=[{value:"classification",text:"Classification"},{value:"clustering",text:"Clustering"},{value:"detection",text:"Detection"},{value:"trend",text:"Trend"},{value:"alert",text:"Alert"},{value:"forecasting",text:"Forecasting"},{value:"content_generation",text:"Content Generation"},{value:"benchmarking",text:"Benchmarking"},{value:"goals",text:"Goals"},{value:"other",text:"Other"}],M=[{value:"unclassified",text:"Unclassified"},{value:"cui",text:"Controlled Unclassified Information (CUI)"},{value:"pii",text:"Personally Identifiable Information (PII)"},{value:"phi",text:"Protected Health Information (PHI)"},{value:"other",text:"Other"}];if(g().query.artifactId!==void 0){const u=g().query.model,n=g().query.version,V=g().query.artifactId;[x,S]=re(async()=>pe(P.public.apiPath+"/model/"+u+"/version/"+n+"/artifact/"+V,{retry:0,method:"GET",onRequestError(){$()},async onResponse({response:m}){var r,f;if(j(m._data)){i.value=m._data.body;const y=m._data.body.summary.problem_type;if(((r=F.find(v=>v.value===y))==null?void 0:r.value)!==void 0&&(i.value.summary.problem_type=(f=F.find(v=>v.value===y))==null?void 0:f.value),m._data.body.data.forEach(v=>{var A,R;const q=v.classification;((A=M.find(t=>t.value===q))==null?void 0:A.value)!==void 0&&(v.classification=(R=M.find(t=>t.value===q))==null?void 0:R.value)}),m._data.body.performance.validated_spec_id){i.value.performance.validated_spec_id=m._data.body.performance.validated_spec_id;const v=await ve(u,n,i.value.performance.validated_spec_id);O.value=J(v)}}},onResponseError(){B()}},"$mTrCeNnnXI")),await x,S()}async function H(){var r;const u=g().query.model,n=g().query.version;let V="";g().query.artifactId===void 0?V=E.value:V=(r=g().query.artifactId)==null?void 0:r.toString();const m={header:{identifier:V,type:"report",timestamp:-1},body:i.value};if(j(m))try{await $fetch(P.public.apiPath+"/model/"+u+"/version/"+n+"/artifact",{retry:0,method:"POST",body:{artifact:m,force:N.value,parents:!1},onRequestError(){$()},onResponseError({response:f}){f.status===409?_e():B()}}),he("report",V),N.value=!0}catch(f){console.log("Error in fetch."),console.log(f)}else console.log("Invalid report.")}function J(u){const n=[],V=JSON.parse(JSON.stringify(u));return V.body.spec.properties.forEach(m=>{new Map(Object.entries(V.body.results[m.name])).forEach(f=>{const y={status:f.type,property:m.name,measurement:f.metadata.measurement_type,evidence_id:f.metadata.identifier.name,message:f.message};n.push(y)})}),n}function X(){alert("Report export is not currently implemented.")}function z(){i.value.performance.goals.push({description:"",metrics:[{description:"",baseline:""}]})}function Q(u){confirm("Are you sure you want to delete this goal?")&&i.value.performance.goals.splice(u,1)}function Y(u){i.value.performance.goals[u].metrics.push({description:"",baseline:""})}function K(u,n){confirm("Are you sure you want to delete this metric?")&&i.value.performance.goals[u].metrics.splice(n,1)}function W(){i.value.data.push({access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""})}function Z(u){confirm("Are you sure you want to delete this data item?")&&i.value.data.splice(u,1)}function ee(u){i.value.data[u].labels.push({description:"",percentage:0})}function te(u,n){confirm("Are you sure you want to delete this label?")&&i.value.data[u].labels.splice(n,1)}function oe(u){i.value.data[u].fields.push({name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""})}function le(u,n){confirm("Are you sure you want to delete this field?")&&i.value.data[u].fields.splice(n,1)}return(u,n)=>{const V=w("UsaBreadcrumb"),m=ae,r=w("UsaTextInput"),f=w("UsaSelect"),y=se,v=ne,q=w("UsaTextarea"),A=w("UsaButton"),R=de;return p(),L(R,{name:"base-layout"},{default:a(()=>[l(V,{items:d(T)},null,8,["items"]),be,("useRoute"in u?u.useRoute:d(g))().query.artifactId===void 0?(p(),L(r,{key:0,modelValue:d(E),"onUpdate:modelValue":n[0]||(n[0]=t=>ue(E)?E.value=t:null)},{label:a(()=>[o(" Artifact ID "),l(m,null,{default:a(()=>[o(" The Artifact ID this negotiation card "),Ve,o(" will be saved under upon submission. ")]),_:1})]),_:1},8,["modelValue"])):ce("",!0),ye,ge,l(f,{modelValue:d(i).summary.problem_type,"onUpdate:modelValue":n[1]||(n[1]=t=>d(i).summary.problem_type=t),options:F},{label:a(()=>[o(" Problem Type "),l(m,null,{default:a(()=>[o(" Type of ML problem the model is intended to solve ")]),_:1})]),_:1},8,["modelValue"]),l(r,{"model-value":d(i).summary.task},{label:a(()=>[o(" Task ")]),_:1},8,["model-value"]),Ue,ke,e("div",Ce,[Ae,qe,(p(!0),_(C,null,k(d(i).performance.goals,(t,h)=>(p(),_("div",{key:h},[e("h3",null,"Goal "+b(h+1),1),l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Goal Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),De,(p(!0),_(C,null,k(t.metrics,(s,U)=>(p(),_("div",{key:U},[e("div",we,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Description "),l(m,null,{default:a(()=>[o(" For each goal, select a performance metric that captures the system's "),xe,o(" ability to accomplish that goal; e.g., acceptance criteria for determining "),Se,o(" that the model is performing correctly. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Ee,[l(r,{modelValue:s.baseline,"onUpdate:modelValue":c=>s.baseline=c},{label:a(()=>[o(" Baseline "),l(m,null,{default:a(()=>[o(" Select a baseline for each performance metric, which means a measurement that "),Re,o(" evaluates whether or not the model will/can achieve the main goal for which it is being created. "),Pe,o(" If the goal cannot be measured directly, select a reasonable proxy and justify how that will "),Te,o(" reliably predict the model’s performance in achieving its goal. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Fe,[l(y,{onClick:c=>K(h,U)},{default:a(()=>[o(" Delete Metric ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>Y(h)},{default:a(()=>[o(" Add Metric ")]),_:2},1032,["onClick"]),l(y,{onClick:s=>Q(h)},{default:a(()=>[o(" Delete goal ")]),_:2},1032,["onClick"]),Me]))),128)),l(v,{class:"margin-button",onClick:n[2]||(n[2]=t=>z())},{default:a(()=>[o(" Add goal ")]),_:1})]),$e,e("table",Be,[Ge,e("tbody",null,[(p(!0),_(C,null,k(d(O),t=>(p(),_("tr",{key:t.evidence_id},[t.status=="Success"?(p(),_("td",Ne,b(t.status),1)):t.status=="Ignore"?(p(),_("td",Oe,b(t.status),1)):t.status=="Failure"?(p(),_("td",Le,b(t.status),1)):(p(),_("td",je,b(t.status),1)),e("td",null,b(t.property),1),e("td",null,b(t.measurement),1),e("td",null,b(t.evidence_id),1),e("td",null,b(t.message),1)]))),128))])]),Ie,He,l(q,{"model-value":d(i).intended_use.usage_context},null,8,["model-value"]),l(q,{modelValue:d(i).intended_use.production_requirements.integration,"onUpdate:modelValue":n[3]||(n[3]=t=>d(i).intended_use.production_requirements.integration=t)},{label:a(()=>[o(" A description of model integration practices. ")]),_:1},8,["modelValue"]),l(r,{modelValue:d(i).intended_use.production_requirements.interface.input.description,"onUpdate:modelValue":n[4]||(n[4]=t=>d(i).intended_use.production_requirements.interface.input.description=t)},{label:a(()=>[o(" Model input description. ")]),_:1},8,["modelValue"]),l(r,{modelValue:d(i).intended_use.production_requirements.interface.output.description,"onUpdate:modelValue":n[5]||(n[5]=t=>d(i).intended_use.production_requirements.interface.output.description=t)},{label:a(()=>[o(" Mode output description. ")]),_:1},8,["modelValue"]),e("div",Je,[Xe,ze,e("div",null,[e("div",Qe,[l(r,{modelValue:d(i).intended_use.production_requirements.resources.gpu,"onUpdate:modelValue":n[6]||(n[6]=t=>d(i).intended_use.production_requirements.resources.gpu=t)},{label:a(()=>[o(" GPU ")]),_:1},8,["modelValue"])]),e("div",Ye,[l(r,{modelValue:d(i).intended_use.production_requirements.resources.cpu,"onUpdate:modelValue":n[7]||(n[7]=t=>d(i).intended_use.production_requirements.resources.cpu=t)},{label:a(()=>[o(" CPU ")]),_:1},8,["modelValue"])])]),e("div",null,[e("div",Ke,[l(r,{modelValue:d(i).intended_use.production_requirements.resources.memory,"onUpdate:modelValue":n[8]||(n[8]=t=>d(i).intended_use.production_requirements.resources.memory=t)},{label:a(()=>[o(" Memory ")]),_:1},8,["modelValue"])]),e("div",We,[l(r,{modelValue:d(i).intended_use.production_requirements.resources.storage,"onUpdate:modelValue":n[9]||(n[9]=t=>d(i).intended_use.production_requirements.resources.storage=t)},{label:a(()=>[o(" Storage ")]),_:1},8,["modelValue"])])])]),Ze,l(r,{modelValue:d(i).risks.fp,"onUpdate:modelValue":n[10]||(n[10]=t=>d(i).risks.fp=t)},{label:a(()=>[o(" False Positive Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:d(i).risks.fn,"onUpdate:modelValue":n[11]||(n[11]=t=>d(i).risks.fn=t)},{label:a(()=>[o(" False Negative Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:d(i).risks.other,"onUpdate:modelValue":n[12]||(n[12]=t=>d(i).risks.other=t)},{label:a(()=>[o(" Other risks of producing incorrect results ")]),_:1},8,["modelValue"]),et,tt,ot,lt,e("div",at,[(p(!0),_(C,null,k(d(i).data,(t,h)=>(p(),_("div",{key:h},[e("h3",null,"Data Item "+b(h+1),1),l(r,{modelValue:t.access,"onUpdate:modelValue":s=>t.access=s},{label:a(()=>[o(" Account Access / Account Availability ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",null,[e("div",nt,[l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Data Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",st,[l(r,{modelValue:t.source,"onUpdate:modelValue":s=>t.source=s},{label:a(()=>[o(" Source Data Location ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(f,{modelValue:t.classification,"onUpdate:modelValue":s=>t.classification=s,options:M},{label:a(()=>[o(" Data Classification ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",it,[(p(!0),_(C,null,k(t.labels,(s,U)=>(p(),_("div",{key:U},[e("div",rt,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Label Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",dt,[l(r,{modelValue:s.percentage,"onUpdate:modelValue":c=>s.percentage=c,type:"number"},{label:a(()=>[o(" Percentage ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ut,[l(y,{onClick:c=>te(h,U)},{default:a(()=>[o(" Delete label ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>ee(h)},{default:a(()=>[o(" Add additional label ")]),_:2},1032,["onClick"])]),e("div",ct,[(p(!0),_(C,null,k(t.fields,(s,U)=>(p(),_("div",{key:U},[e("h3",pt," Data Schema "+b(h+1)+" - "+b(U+1),1),e("div",null,[e("div",mt,[l(r,{modelValue:s.name,"onUpdate:modelValue":c=>s.name=c},{label:a(()=>[o(" Field Name ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",_t,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Field Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",ht,[l(r,{modelValue:s.type,"onUpdate:modelValue":c=>s.type=c},{label:a(()=>[o(" Field Type ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ft,[l(r,{modelValue:s.expected_values,"onUpdate:modelValue":c=>s.expected_values=c},{label:a(()=>[o(" Expected Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",vt,[l(r,{modelValue:s.missing_values,"onUpdate:modelValue":c=>s.missing_values=c},{label:a(()=>[o(" Missing Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",bt,[l(r,{modelValue:s.special_values,"onUpdate:modelValue":c=>s.special_values=c},{label:a(()=>[o(" Special Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(y,{class:"margin-button",onClick:c=>le(h,U)},{default:a(()=>[o(" Delete schema ")]),_:2},1032,["onClick"]),Vt]))),128)),l(v,{class:"margin-button",onClick:s=>oe(h)},{default:a(()=>[o(" Add additional schema ")]),_:2},1032,["onClick"])]),l(r,{modelValue:t.rights,"onUpdate:modelValue":s=>t.rights=s},{label:a(()=>[o(" Data Rights "),l(m,null,{default:a(()=>[o(" Are there particular ways in which the data can and cannot be used? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.policies,"onUpdate:modelValue":s=>t.policies=s},{label:a(()=>[o(" Data Policies "),l(m,null,{default:a(()=>[o(" Are there policies that govern the data and its use, such as Personally Identifiable Information [PII]? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.identifiable_information,"onUpdate:modelValue":s=>t.identifiable_information=s},{label:a(()=>[o(" Identifiable Information ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(y,{class:"margin-button",onClick:s=>Z(h)},{default:a(()=>[o(" Delete data item ")]),_:2},1032,["onClick"]),yt]))),128)),l(v,{class:"margin-button",onClick:n[13]||(n[13]=t=>W())},{default:a(()=>[o(" Add data item ")]),_:1})]),gt,Ut,(p(!0),_(C,null,k(d(i).comments,(t,h)=>(p(),_("div",{key:h},[l(r,{modelValue:t.content,"onUpdate:modelValue":s=>t.content=s},null,8,["modelValue","onUpdate:modelValue"])]))),128)),kt,Ct,e("div",At,[l(A,{class:"secondary-button",onClick:n[14]||(n[14]=t=>("cancelFormSubmission"in u?u.cancelFormSubmission:d(me))("/"))},{default:a(()=>[o(" Cancel ")]),_:1}),l(A,{class:"primary-button",disabled:"",onClick:n[15]||(n[15]=t=>X())},{default:a(()=>[o(" Export ")]),_:1}),l(A,{class:"primary-button",onClick:n[16]||(n[16]=t=>H())},{default:a(()=>[o(" Save ")]),_:1})])]),_:1})}}});export{xt as default};
