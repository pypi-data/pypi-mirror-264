"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[95797],{95797:function(e,t,i){var n,a,r,l,o,s,u,d,c=i(61780),h=i(6238),v=i(94881),f=i(1781),b=i(36683),p=i(89231),k=i(29864),y=i(83647),m=i(8364),_=(i(77052),i(4187),i(53501),i(36724),i(60060),i(848),i(68113),i(34517),i(66274),i(85767),i(98168),i(40924)),g=i(196),A=i(66580),x=i(16895),M=i(77664),w=i(51477),Z=i(94027),C=i(72590),B=(i(9028),i(2090),i(69466),i(21950),i(43859),i(84368),i(57733),i(56262),i(38129),i(85038),i(84531),i(22836),i(15445),i(24483),i(13478),i(46355),i(14612),i(53691),i(48455),i(34290),i(8339),i(69760)),D=i(45081),q=i(47038),E=i(38696),F=i(1169),P=(i(35641),i(12731),i(39335),i(1683),function(e){return(0,_.qy)(n||(n=(0,h.A)(['<ha-list-item graphic="icon" class="','"> '," "," </ha-list-item>"])),(0,B.H)({"add-new":"add_new"===e.label_id}),e.icon?(0,_.qy)(a||(a=(0,h.A)(['<ha-icon slot="graphic" .icon="','"></ha-icon>'])),e.icon):_.s6,e.name)});(0,m.A)([(0,g.EM)("ha-label-picker")],(function(e,t){var i,n,a=function(t){function i(){var t;(0,p.A)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=(0,k.A)(this,i,[].concat(a)),e(t),t}return(0,y.A)(i,t),(0,b.A)(i)}(t);return{F:a,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,g.wk)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,g.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,g.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value:function(){return!1}},{kind:"method",key:"open",value:(n=(0,f.A)((0,v.A)().mark((function e(){var t;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"focus",value:(i=(0,f.A)((0,v.A)().mark((function e(){var t;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,w.o5)(this.hass.connection,(function(t){e._labels=t}))]}},{kind:"field",key:"_getLabels",value:function(){var e=this;return(0,D.A)((function(t,i,n,a,r,l,o,s,u,d,h){if(!t.length)return[{label_id:"no_labels",name:e.hass.localize("ui.components.label-picker.no_labels"),icon:null,color:null}];var v,f,b={};(r||l||o||s||u)&&(b=(0,F.g2)(a),v=n,f=a.filter((function(e){return e.labels.length>0})),r&&(v=v.filter((function(e){var t=b[e.id];return!(!t||!t.length)&&b[e.id].some((function(e){return r.includes((0,q.m)(e.entity_id))}))})),f=f.filter((function(e){return r.includes((0,q.m)(e.entity_id))}))),l&&(v=v.filter((function(e){var t=b[e.id];return!t||!t.length||a.every((function(e){return!l.includes((0,q.m)(e.entity_id))}))})),f=f.filter((function(e){return!l.includes((0,q.m)(e.entity_id))}))),o&&(v=v.filter((function(t){var i=b[t.id];return!(!i||!i.length)&&b[t.id].some((function(t){var i=e.hass.states[t.entity_id];return!!i&&(i.attributes.device_class&&o.includes(i.attributes.device_class))}))})),f=f.filter((function(t){var i=e.hass.states[t.entity_id];return i.attributes.device_class&&o.includes(i.attributes.device_class)}))),s&&(v=v.filter((function(e){return s(e)}))),u&&(v=v.filter((function(t){var i=b[t.id];return!(!i||!i.length)&&b[t.id].some((function(t){var i=e.hass.states[t.entity_id];return!!i&&u(i)}))})),f=f.filter((function(t){var i=e.hass.states[t.entity_id];return!!i&&u(i)}))));var p,k,y=t,m=new Set;(v&&(p=v.filter((function(e){return e.area_id})).map((function(e){return e.area_id})),v.forEach((function(e){e.labels.forEach((function(e){return m.add(e)}))}))),f)&&(p=(null!==(k=p)&&void 0!==k?k:[]).concat(f.filter((function(e){return e.area_id})).map((function(e){return e.area_id}))),f.forEach((function(e){e.labels.forEach((function(e){return m.add(e)}))})));return p&&p.forEach((function(e){i[e].labels.forEach((function(e){return m.add(e)}))})),h&&(y=y.filter((function(e){return!h.includes(e.label_id)}))),(v||f)&&(y=y.filter((function(e){return m.has(e.label_id)}))),y.length||(y=[{label_id:"no_labels",name:e.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null}]),d?y:[].concat((0,c.A)(y),[{label_id:"add_new",name:e.hass.localize("ui.components.label-picker.add_new"),icon:"mdi:plus",color:null}])}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass&&this._labels||this._init&&e.has("_opened")&&this._opened){this._init=!0;var t=this._getLabels(this._labels,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels).map((function(e){return Object.assign(Object.assign({},e),{},{strings:[e.label_id,e.name]})}));this.comboBox.items=t,this.comboBox.filteredItems=t}}},{kind:"method",key:"render",value:function(){var e,t=this;return(0,_.qy)(r||(r=(0,h.A)([' <ha-combo-box .hass="','" .helper="','" item-value-path="label_id" item-id-path="label_id" item-label-path="name" .value="','" .disabled="','" .required="','" .label="','" .placeholder="','" .renderer="','" @filter-changed="','" @opened-changed="','" @value-changed="','"> </ha-combo-box> '])),this.hass,this.helper,this._value,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.label"):this.label,this.placeholder?null===(e=this._labels)||void 0===e||null===(e=e.find((function(e){return e.label_id===t.placeholder})))||void 0===e?void 0:e.name:void 0,P,this._filterChanged,this._openedChanged,this._labelChanged)}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target,i=e.detail.value;if(i){var n=(0,E.H)(i,t.items||[]);this.noAdd||0!==(null==n?void 0:n.length)?this.comboBox.filteredItems=n:(this._suggestion=i,this.comboBox.filteredItems=[{label_id:"add_new_suggestion",name:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:this._suggestion}),picture:null}])}else this.comboBox.filteredItems=this.comboBox.items}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_labelChanged",value:function(e){var t=this;e.stopPropagation();var i,n=e.detail.value;if("no_labels"===n)return n="",void this.comboBox.setInputValue("");["add_new_suggestion","add_new"].includes(n)?(e.target.value=this._value,(0,C.f)(this,{entry:void 0,suggestedName:"add_new_suggestion"===n?this._suggestion:"",createEntry:(i=(0,f.A)((0,v.A)().mark((function e(i){var n,a;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w._9)(t.hass,i);case 2:return n=e.sent,a=[].concat((0,c.A)(t._labels),[n]),t.comboBox.filteredItems=t._getLabels(a,t.hass.areas,Object.values(t.hass.devices),Object.values(t.hass.entities),t.includeDomains,t.excludeDomains,t.includeDeviceClasses,t.deviceFilter,t.entityFilter,t.noAdd,t.excludeLabels),e.next=7,t.updateComplete;case 7:return e.next=9,t.comboBox.updateComplete;case 9:return t._setValue(n.label_id),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}),this._suggestion=void 0,this.comboBox.setInputValue("")):n!==this._value&&this._setValue(n)}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,M.r)(t,"value-changed",{value:e}),(0,M.r)(t,"change")}),0)}}]}}),(0,Z.E)(_.WF)),(0,m.A)([(0,g.EM)("ha-labels-picker")],(function(e,t){var i,n,a=function(t){function i(){var t;(0,p.A)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=(0,k.A)(this,i,[].concat(a)),e(t),t}return(0,y.A)(i,t),(0,b.A)(i)}(t);return{F:a,d:[{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,g.MZ)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean,attribute:"no-add"})],key:"noAdd",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,g.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,g.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,g.wk)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,g.P)("ha-label-picker",!0)],key:"labelPicker",value:void 0},{kind:"method",key:"open",value:(n=(0,f.A)((0,v.A)().mark((function e(){var t;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.labelPicker)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"focus",value:(i=(0,f.A)((0,v.A)().mark((function e(){var t;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.labelPicker)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"hassSubscribe",value:function(){var e=this;return[(0,w.o5)(this.hass.connection,(function(t){e._labels=t}))]}},{kind:"method",key:"render",value:function(){var e,t=this;return(0,_.qy)(l||(l=(0,h.A)([" ",' <ha-label-picker .hass="','" .helper="','" .disabled="','" .required="','" .label="','" .placeholder="','" .excludeLabels="','" @value-changed="','"> </ha-label-picker> '])),null!==(e=this.value)&&void 0!==e&&e.length?(0,_.qy)(o||(o=(0,h.A)(["<ha-chip-set> "," </ha-chip-set>"])),(0,A.u)(this.value,(function(e){return e}),(function(e,i){var n,a=null===(n=t._labels)||void 0===n?void 0:n.find((function(t){return t.label_id===e})),r=null!=a&&a.color?(0,x.M)(a.color):void 0;return(0,_.qy)(s||(s=(0,h.A)([' <ha-input-chip .idx="','" .item="','" @remove="','" @click="','" .label="','" selected="selected" style="','"> '," </ha-input-chip> "])),i,a,t._removeItem,t._openDetail,null==a?void 0:a.name,r?"--color: ".concat(r):"",null!=a&&a.icon?(0,_.qy)(u||(u=(0,h.A)(['<ha-icon slot="icon" .icon="','"></ha-icon>'])),a.icon):_.s6)}))):_.s6,this.hass,this.helper,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.add_label"):this.label,this.placeholder,this.value,this._labelChanged)}},{kind:"get",key:"_value",value:function(){return this.value||[]}},{kind:"method",key:"_removeItem",value:function(e){this._value.splice(e.target.idx,1),this._setValue((0,c.A)(this._value))}},{kind:"method",key:"_openDetail",value:function(e){var t,i=this,n=e.target.item;(0,C.f)(this,{entry:n,updateEntry:(t=(0,f.A)((0,v.A)().mark((function e(t){var a;return(0,v.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Rp)(i.hass,n.label_id,t);case 2:return a=e.sent,i._labels=i._labels.map((function(e){return e.label_id===a.label_id?a:e})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})})}},{kind:"method",key:"_labelChanged",value:function(e){e.stopPropagation();var t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([].concat((0,c.A)(this._value),[t])),this.labelPicker.value="")}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,M.r)(t,"value-changed",{value:e}),(0,M.r)(t,"change")}),0)}},{kind:"field",static:!0,key:"styles",value:function(){return(0,_.AH)(d||(d=(0,h.A)(["ha-chip-set{margin-bottom:8px}ha-input-chip{--md-input-chip-selected-container-color:var(--color);--ha-input-chip-selected-container-opacity:0.5}"])))}}]}}),(0,Z.E)(_.WF))},51477:function(e,t,i){i.d(t,{Rp:function(){return d},_9:function(){return u},_G:function(){return l},d4:function(){return c},o5:function(){return s}});i(14460),i(848),i(43859);var n=i(99955),a=i(95507),r=i(47394),l=function(e){return e.sendMessagePromise({type:"config/label_registry/list"}).then((function(e){return e.sort((function(e,t){return(0,a.x)(e.name,t.name)}))}))},o=function(e,t){return e.subscribeEvents((0,r.s)((function(){return l(e).then((function(e){return t.setState(e,!0)}))}),500,!0),"label_registry_updated")},s=function(e,t){return(0,n.N)("_labelRegistry",l,o,e,t)},u=function(e,t){return e.callWS(Object.assign({type:"config/label_registry/create"},t))},d=function(e,t,i){return e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i))},c=function(e,t){return e.callWS({type:"config/label_registry/delete",label_id:t})}},72590:function(e,t,i){i.d(t,{f:function(){return r}});i(21950),i(68113),i(55888),i(56262),i(8339);var n=i(77664),a=function(){return Promise.all([i.e(89226),i.e(29292),i.e(22658),i.e(29805),i.e(88201),i.e(61606),i.e(50988),i.e(34667),i.e(27350),i.e(32503),i.e(92025),i.e(74895),i.e(57780),i.e(3410)]).then(i.bind(i,3410))},r=function(e,t){(0,n.r)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:a,dialogParams:t})}}}]);
//# sourceMappingURL=95797.G0r58I4xY3w.js.map